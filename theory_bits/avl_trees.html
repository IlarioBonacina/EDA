<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Binary Search Trees – EDA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-f2a1071e85750ec973bbb8a8f120da0f.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-557aace189c874196b1faf1171d48a8d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/jquery-3.6.3/jquery-3.6.3.min.js"></script>
<script src="../site_libs/quarto-contrib/code-fullscreen-1.0.0/code-fullscreen.js" defer="true"></script>
<link href="../site_libs/quarto-contrib/code-fullscreen-1.0.0/code-fullscreen.css" rel="stylesheet">
<script src="../site_libs/quarto-contrib/iconify-2.1.0/iconify-icon.min.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <div id="quarto-announcement" data-announcement-id="df0a319c1a43838ae13e1dd1b4ee3b04" class="alert alert-warning hidden"><i class="bi bi-exclamation-triangle-fill quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p>Por el momento esta página está disponible en Inglés. Si lo necesitas, puedes utilizar <a href="https://ilariobonacina-github-io.translate.goog/EDA/?_x_tr_sl=en&amp;_x_tr_tl=es&amp;_x_tr_hl=ca&amp;_x_tr_pto=wapp">Google Translate</a> para traducir al castellano, al català, o al idioma que más te agrade. Ten en cuenta que Google Translate no funciona muy bien en páginas con mucha matemática.</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#avl-trees" id="toc-avl-trees" class="nav-link active" data-scroll-target="#avl-trees">AVL Trees</a></li>
  </ul>
<div class="quarto-other-links"><h2>Other Links</h2><ul><li><a href="https://www.cs.upc.edu/eda/"><i class="bi bi-link-45deg"></i>EDA Main Page</a></li><li><a href="https://jutge.org"><i class="bi bi-link-45deg"></i>Jutge.org</a></li><li><a href="https://en.cppreference.com/w/"><i class="bi bi-code-slash"></i>cppreference.com</a></li><li><a href="https://www.fib.upc.edu/en/studies/bachelors-degrees/bachelor-degree-informatics-engineering/curriculum/syllabus/EDA"><i class="bi bi-link-45deg"></i>Official Syllabus</a></li><li><a href="https://www.cs.upc.edu/eda/data/uploads/eda-problem-set.cat.pdf"><i class="bi bi-book"></i>EDA Problem Set</a></li><li><a href="https://www.cs.upc.edu/~oliveras/examens.cat.pdf"><i class="bi bi-book"></i>Collection of Solved Exams</a></li><li><a href="https://www.cs.upc.edu/eda/data/uploads/eda-codis.pdf"><i class="bi bi-book"></i>Algorithms in C++</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Binary Search Trees</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>A <strong>Binary Search Tree</strong> (BST) <span class="math inline">T</span> is a binary tree where each vertex <span class="math inline">v</span> has associated a label <span class="math inline">\mathsf{KEY}(v)</span> and <span class="math inline">T</span> is either empty, or <span class="math inline">T</span> contains at least one element <span class="math inline">x</span> at its root, and</p>
<ul>
<li>the left subtree <span class="math inline">T_L</span> and the right subtree <span class="math inline">T_R</span> are both binary search trees, and</li>
<li>for all vertices <span class="math inline">y</span> in <span class="math inline">T_L</span>, <span class="math inline">\mathsf{KEY}(y) &lt;\mathsf{KEY}(x)</span>, and</li>
<li>for all vertices <span class="math inline">z</span> in <span class="math inline">T_R</span>, <span class="math inline">\mathsf{KEY}(z) &gt;\mathsf{KEY}(x)</span>.</li>
</ul>
<p>The <strong>height</strong> of a BST <span class="math inline">T</span> with <span class="math inline">n</span> vertices is <span class="math inline">\mathsf{height}(T)</span> and it is the length of the longest path from the root of <span class="math inline">T</span> to a leaf. It always holds that <span class="math display">
\lceil \log_2(n+1)\rceil \leq \mathsf{height}(T) \leq n\ ,
</span> where the first inequality is an equality if <span class="math inline">T</span> is a perfectly balanced tree.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Search in a BST</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Insertion in a BST</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Deletion in a BST</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Let <span class="math inline">T</span> be a BST and let <span class="math inline">k</span> be the key we are looking for. That is we want to decide whether there is a vertex <span class="math inline">v</span> in <span class="math inline">T</span> with <span class="math inline">\mathsf{KEY}(v)=k</span>.</p>
<p><strong>If <span class="math inline">T</span> is empty</strong>: easy, <span class="math inline">k</span> is not appearing in the tree. We need only to signal this event, e.g.&nbsp;we return <code>false</code>.</p>
<p><strong>If <span class="math inline">T</span> is not empty</strong>, let <span class="math inline">r</span> be the root of <span class="math inline">T</span>.</p>
<ul>
<li>If <span class="math inline">k=\mathsf{KEY}(r)</span> we are done.</li>
<li>If <span class="math inline">k&lt;\mathsf{KEY}(r)</span>, we make a recursive call on the left subtree <span class="math inline">T_L</span> of <span class="math inline">T</span> to continue the search because if there exists an element in <span class="math inline">T</span> with key <span class="math inline">k</span> it must be in <span class="math inline">T_L</span>.</li>
<li>Analogously, if <span class="math inline">k&gt;\mathsf{KEY}(r)</span> then the search must recursively continue in the right subtree of <span class="math inline">T</span>.</li>
</ul>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>The insertion algorithm is also very easy and we can design it by using the same reasoning as for the search algorithm: if the new key to be inserted is smaller than the key at the root insert in the left subtree; otherwise, insert into the right subtree.</p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>Deleting an element with given key <span class="math inline">k</span> involves two phases:</p>
<dl>
<dt>Phase 1: Locating the node with key <span class="math inline">k</span> (if any) in the tree</dt>
<dd>
This is just a search (see the relative tab).
</dd>
<dt>Phase 2: Removing that node</dt>
<dd>
we have three possibilities:
</dd>
</dl>
<ol type="1">
<li><p>if the node to be removed is a leaf (i.e.&nbsp;both subtrees are empty) then it suffices to remove the node.</p></li>
<li><p>if the node <span class="math inline">x</span> to be removed has <strong>only one</strong> non-empty subtree, it is also easy to remove the node: lift the non-empty subtree so that the father of <span class="math inline">x</span> points to the subtree’s root instead of pointing to <span class="math inline">x</span>.</p></li>
<li><p>if the node <span class="math inline">x</span> to be removed has two non-empty subtrees say the left subtree is <span class="math inline">T_L</span> and the right subtree is <span class="math inline">T_R</span>.</p>
<ul>
<li>We find the node <span class="math inline">y</span> with <em>largest</em> key in <span class="math inline">T_L</span>.</li>
<li>We remove <span class="math inline">y</span> and</li>
<li>place <span class="math inline">\mathsf{KEY}(y)</span> where <span class="math inline">x</span> was.</li>
</ul>
<p>This works because <span class="math inline">y</span> only has one non-empty (left) subtree (why?), so we can remove <span class="math inline">y</span> as in step 2. The same would work if instead of the <span class="math inline">T_L</span> one considers <span class="math inline">T_R</span> and the element with <em>smallest</em> key in it. Experimentally, it is actually beneficial to alternate between the two options.</p></li>
</ol>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cost of a search/insertion/deletion
</div>
</div>
<div class="callout-body-container callout-body">
<p>The worst-case cost of a search/insertion/deletion in a BST <span class="math inline">T</span> is <span class="math inline">\Theta(\mathsf{height}(T))</span>. That is, it can be as bad as <span class="math inline">\Theta(n)</span> if <span class="math inline">T</span> has <span class="math inline">n</span> vertices and it is really unbalanced. However, on average, the height of a random BST is <span class="math inline">\Theta(\log n)</span>, and thus the average cost of the basic operations is <span class="math inline">\Theta(\log n)</span> too.</p>
</div>
</div>
<section id="avl-trees" class="level2">
<h2 class="anchored" data-anchor-id="avl-trees">AVL Trees</h2>
<p>The main drawback of BSTs is that they can be, or become, strongly unbalanced. The AVL trees were the first-ever self-balancing binary search trees. They were introduced in 1962 by <strong>A</strong>delson-<strong>V</strong>elskii and <strong>L</strong>andis (hence the acronim AVL). AVL trees are still commonly used in applications like databases and file systems where read and write operations need to be fast and efficient.</p>
<p>An <strong>AVL tree</strong> is a binary search tree that is either empty or</p>
<ul>
<li>its left and right subtrees, say <span class="math inline">L</span> and <span class="math inline">R</span> respectively are both AVL trees, and</li>
<li>the height of <span class="math inline">L</span> and <span class="math inline">R</span> differs by one at most: <span class="math display">
|\mathsf{height}(R)−\mathsf{height}(L)|\leq 1\ .
</span></li>
</ul>
<p>The difference of the two subtree heights indicates the node’s <em>balance factor</em>; by convention, we subtract the right subtree’s height from the left’s. Let <span class="math inline">\mathsf{bal}(x)</span> be the difference between the height of the right and left subtrees of an arbitrary vertex <span class="math inline">x</span>, then, by construction, in a AVL tree we must have <span class="math inline">\mathsf{bal}(x) \in\{−1,0,+1\}</span>. Therefore, any node <span class="math inline">v</span> in an AVL tree can only be of three types:</p>
<ul>
<li><strong>neutral</strong>: the heights of the subtrees are equal,</li>
<li><strong>left-heavy</strong>: the left subtree has a greater height, or</li>
<li><strong>right-heavy</strong>: the right subtree is taller.</li>
</ul>
<p>For instance, the following BST is not an AVL, because the balance factors are not in <span class="math inline">\{−1,0,+1\}</span>.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="97" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 96;"><span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3-selection@1.4"</span><span class="op">,</span> <span class="st">"d3-transition@1.3"</span><span class="op">,</span> <span class="st">"d3-ease"</span><span class="op">,</span> <span class="st">"d3-interpolate"</span><span class="op">,</span> <span class="st">"d3-scale-chromatic@1.5"</span>)</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>ewidth <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(width<span class="op">,</span> <span class="dv">640</span>)</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>dur <span class="op">=</span> <span class="dv">2000</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="bu">root</span> <span class="op">=</span> d3<span class="op">.</span><span class="at">schemeCategory10</span>[<span class="dv">0</span>]</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>pivot <span class="op">=</span> d3<span class="op">.</span><span class="at">schemeCategory10</span>[<span class="dv">1</span>]</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>secondary <span class="op">=</span> d3<span class="op">.</span><span class="at">schemeCategory10</span>[<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-6" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="106" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 105;"><span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;figure&gt;&lt;svg width=</span><span class="sc">${</span>ewidth<span class="sc">}</span><span class="vs"> height="400"&gt;</span></span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e54" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">" y1="50" x2="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y2="150" stroke="black" /&gt;</span></span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e57" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">" y1="50" x2="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y2="150" stroke="black" /&gt;</span></span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e42" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y1="150" x2="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y2="250" stroke="black" /&gt;</span></span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e76" x1="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y1="150" x2="</span><span class="sc">${</span><span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y2="250" stroke="black" /&gt;</span></span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e78" x1="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y1="150" x2="</span><span class="sc">${</span><span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y2="250" stroke="black" /&gt;</span></span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e23" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y1="250" x2="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span><span class="sc">}</span><span class="vs">" y2="350" stroke="black" /&gt;</span></span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n5" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">, 50)"&gt;</span></span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="white" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" text-anchor="middle" alignment-baseline="central"&gt;5&lt;/text&gt;</span></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="#C00" transform="translate(3, 25)" alignment-baseline="hanging"&gt;-1&lt;/text&gt;</span></span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n4" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">, 150)"&gt;</span></span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="</span><span class="sc">${</span><span class="bu">root</span><span class="sc">}</span><span class="vs">" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="white" text-anchor="middle" alignment-baseline="central"&gt;4&lt;/text&gt;</span></span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="#C00" font-weight="bold" transform="translate(3, 25)" alignment-baseline="hanging"&gt;-2&lt;/text&gt;</span></span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n7" transform="translate(</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">, 150)"&gt;</span></span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="white" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" text-anchor="middle" alignment-baseline="central"&gt;7&lt;/text&gt;</span></span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="#black" transform="translate(3, 25)" alignment-baseline="hanging"&gt;+0&lt;/text&gt;</span></span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n2" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">, 250)"&gt;</span></span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="white" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" text-anchor="middle" alignment-baseline="central"&gt;2&lt;/text&gt;</span></span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="#090" transform="translate(15, 20)" alignment-baseline="hanging"&gt;+1&lt;/text&gt;</span></span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n6" transform="translate(</span><span class="sc">${</span><span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">, 250)"&gt;</span></span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="white" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" text-anchor="middle" alignment-baseline="central"&gt;6&lt;/text&gt;</span></span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" transform="translate(3, 25)" alignment-baseline="hanging"&gt;+0&lt;/text&gt;</span></span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n8" transform="translate(</span><span class="sc">${</span><span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">, 250)"&gt;</span></span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="white" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" text-anchor="middle" alignment-baseline="central"&gt;8&lt;/text&gt;</span></span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" transform="translate(3, 25)" alignment-baseline="hanging"&gt;+0&lt;/text&gt;</span></span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n3" transform="translate(</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span><span class="sc">}</span><span class="vs">, 350)"&gt;</span></span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="white" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" text-anchor="middle" alignment-baseline="central"&gt;3&lt;/text&gt;</span></span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" transform="translate(3, 25)" alignment-baseline="hanging"&gt;+0&lt;/text&gt;</span></span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/svg&gt;</span></span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;figcaption style="max-width:640px;text-align:center"&gt;Balance Factors. &lt;span style="color: #C00"&gt;Red&lt;/span&gt; indicates left-heavy, &lt;span style="color: #090"&gt;green&lt;/span&gt; right-heavy, &lt;span style="font-weight:bold"&gt;bold&lt;/span&gt; indicates where tree is unbalanced.&lt;/figcaption&gt; &lt;/figure&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
<p>Implementations of AVL trees usually store at each vertex additional information: its height and/or its balance (<span class="math inline">\mathsf{bal}(·)</span>) to avoid costly computations.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lemma
</div>
</div>
<div class="callout-body-container callout-body">
<p>For any AVL tree <span class="math inline">T</span> with <span class="math inline">n</span> vertices, <span class="math inline">\mathsf{height}(T)=\Theta(\log n)</span>.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Since <span class="math inline">\mathsf{height}(T) \in \Omega(\log n)</span> holds for any binary search tree (and therefore, in particular for AVL trees), we need just to show that <span class="math inline">\mathsf{height}(T) \in O(\log n)</span>.</p>
<p>Let <span class="math inline">N_h</span> the least number of nodes we need to build an AVL of height <span class="math inline">h</span>. Clearly, <span class="math inline">N_0 = 0</span> and <span class="math inline">N_1 = 1</span>. The most unbalanced possible AVL with height <span class="math inline">h&gt;1</span> can be built by putting a root then a left subtree which is a most unbalanced AVL of height <span class="math inline">h−1</span> (using only <span class="math inline">N_{h−1}</span> nodes), and a right subtree which is a most unblanced AVL of height <span class="math inline">h−2</span> (using <span class="math inline">N_{h−2}</span> nodes). Hence <span class="math display">
N_h = 1 + N_{h−1} + N_{h−2}\ .
</span> This sequence looks suspiciously similar to the Fibonacci sequence <span class="math inline">(F_h)_{h\in \mathbb N}</span>, indeed, by induction on <span class="math inline">h</span>, it is not difficult to show that <span class="math inline">N_h=F_{h+1}-1</span>. It is well known that <span class="math inline">F_h=\Theta(\varphi^h)</span>, where <span class="math inline">\varphi=\frac{1+\sqrt{5}}{2}</span>. That is, it also holds that <span id="eq-theta-Nh"><span class="math display">
N_h=\Theta(\varphi^h)\ .
\tag{1}</span></span> Consider now an arbitrary AVL <span class="math inline">T</span> of <span class="math inline">n</span> vertices and <span class="math inline">\mathsf{height}(T)=h</span>. Then we must have <span class="math inline">N_h\leq n</span> (by definition of <span class="math inline">N_h</span>). Using (<a href="#eq-theta-Nh" class="quarto-xref">Equation&nbsp;1</a>), in particular we have that for <span class="math inline">n</span> large enough, there is a constant <span class="math inline">c</span> such that <span class="math display">
c\varphi^h\leq N_h\leq n\ .
</span> Taking <span class="math inline">\log</span> of both sides of the inequality we get that <span class="math inline">h=O(\log n)</span>.</p>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Search in an AVL</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Insertion in an AVL</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Deletion in an AVL</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>This is done as in any other BST. The thing is that in an AVL, by the previous lemma, the cost of any search for a key in an AVL tree of size <span class="math inline">n</span> is <span class="math inline">O(\log n)</span>, even in the worst case.</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>Insertion at first acts as its counterpart for generic BSTs, but then we need to perform extra work to maintain the balance invariant of AVLs.</p>
<p>Indeed, the insertion done as in a generic BST might invalidate the balance of some nodes, <strong>but</strong> only of nodes in the path between the root to the inserted vertex. (why?)</p>
<p>If the balance condition at some node <span class="math inline">x</span> is not valid anymore (it can only become <span class="math inline">+2</span> or <span class="math inline">-2</span>) we must do something to fix it and reestablish the invariant. This is done via <em>left</em> and <em>right</em> rotations (or combinations of them).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The “<em>magic</em>” of AVL trees
</div>
</div>
<div class="callout-body-container callout-body">
<p>After the insertion of a vertex in an AVL tree, at most 2 rotations are enough to re-establish the balances <strong>on every vertex</strong>.</p>
</div>
</div>
<p>Let <em>root</em> denote the deepest vertex that is not respecting the balance condition before any rotation, and <em>pivot</em> its child along the path toewards the new vertex added.</p>
<p>A <strong>single rotation</strong> is enough to restore the invariant when an unbalanced root has a pivot that is heavy in the same direction, this might be either a right or left rotation, depending if the root was left-hevy or right-heavy.</p>
<p>Below, the dotted lines denote the new vertex added.</p>
<dl>
<dt>Right rotation</dt>
<dd>

</dd>
</dl>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="215" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 214;"><span id="cb3-215"><a href="#cb3-215" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb3-216"><a href="#cb3-216" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> view <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;figure&gt;&lt;svg width=</span><span class="sc">${</span>ewidth<span class="sc">}</span><span class="vs"> height="452"&gt;</span></span>
<span id="cb3-217"><a href="#cb3-217" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e12" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">" y1="50" x2="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y2="150" stroke="black" /&gt;</span></span>
<span id="cb3-218"><a href="#cb3-218" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e13" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">" y1="50" x2="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y2="150" stroke="black" /&gt;</span></span>
<span id="cb3-219"><a href="#cb3-219" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e24" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y1="150" x2="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y2="250" stroke="black" /&gt;</span></span>
<span id="cb3-220"><a href="#cb3-220" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e25" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y1="150" x2="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y2="250" stroke="black" /&gt;</span></span>
<span id="cb3-221"><a href="#cb3-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-222"><a href="#cb3-222" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n1" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">, 50)"&gt;</span></span>
<span id="cb3-223"><a href="#cb3-223" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="</span><span class="sc">${</span><span class="bu">root</span><span class="sc">}</span><span class="vs">" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb3-224"><a href="#cb3-224" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="value" fill="white" text-anchor="middle" alignment-baseline="central"&gt;root&lt;/text&gt;</span></span>
<span id="cb3-225"><a href="#cb3-225" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="balance" fill="#C00" transform="translate(3, 25)" alignment-baseline="hanging" style="font-weight:bold"&gt;-2&lt;/text&gt;</span></span>
<span id="cb3-226"><a href="#cb3-226" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb3-227"><a href="#cb3-227" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n2" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">, 150)"&gt;</span></span>
<span id="cb3-228"><a href="#cb3-228" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="</span><span class="sc">${</span>pivot<span class="sc">}</span><span class="vs">" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb3-229"><a href="#cb3-229" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="value" fill="white" text-anchor="middle" alignment-baseline="central"&gt;pivot&lt;/text&gt;</span></span>
<span id="cb3-230"><a href="#cb3-230" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="balance" fill="#C00" transform="translate(3, 25)" alignment-baseline="hanging"&gt;-1&lt;/text&gt;</span></span>
<span id="cb3-231"><a href="#cb3-231" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb3-232"><a href="#cb3-232" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n3" transform="translate(</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">, 150)"&gt;</span></span>
<span id="cb3-233"><a href="#cb3-233" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 100 -25, 100" fill="white" stroke="black" /&gt;</span></span>
<span id="cb3-234"><a href="#cb3-234" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="50" text-anchor="middle" alignment-baseline="central"&gt;h&lt;/text&gt;</span></span>
<span id="cb3-235"><a href="#cb3-235" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb3-236"><a href="#cb3-236" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n4" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">, 250)"&gt;</span></span>
<span id="cb3-237"><a href="#cb3-237" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 100 -25, 100" fill="white" stroke="black" /&gt;</span></span>
<span id="cb3-238"><a href="#cb3-238" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="50" text-anchor="middle" alignment-baseline="central"&gt;h&lt;/text&gt;</span></span>
<span id="cb3-239"><a href="#cb3-239" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;line x1="0" y1="100" x2="0" y2="175" stroke="black" stroke-dasharray="4" /&gt;</span></span>
<span id="cb3-240"><a href="#cb3-240" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle cy="175" r="10" stroke-dasharray="4" fill="white" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb3-241"><a href="#cb3-241" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb3-242"><a href="#cb3-242" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n5" transform="translate(</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">, 250)"&gt;</span></span>
<span id="cb3-243"><a href="#cb3-243" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 100 -25, 100" fill="white" stroke="black" /&gt;</span></span>
<span id="cb3-244"><a href="#cb3-244" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="50" text-anchor="middle" alignment-baseline="central"&gt;h&lt;/text&gt;</span></span>
<span id="cb3-245"><a href="#cb3-245" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb3-246"><a href="#cb3-246" aria-hidden="true" tabindex="-1"></a><span class="vs"> &lt;/svg&gt;</span></span>
<span id="cb3-247"><a href="#cb3-247" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;figcaption style="max-width:640px;text-align:center"&gt;Balance Factors before &amp; after a single right rotation&lt;/figcaption&gt;&lt;/figure&gt;`</span><span class="op">;</span></span>
<span id="cb3-248"><a href="#cb3-248" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-249"><a href="#cb3-249" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tree_view <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(view)<span class="op">;</span></span>
<span id="cb3-250"><a href="#cb3-250" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> t <span class="op">=</span> d3<span class="op">.</span><span class="fu">transition</span>()<span class="op">;</span></span>
<span id="cb3-251"><a href="#cb3-251" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-252"><a href="#cb3-252" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e12"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-253"><a href="#cb3-253" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-254"><a href="#cb3-254" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-255"><a href="#cb3-255" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-256"><a href="#cb3-256" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-257"><a href="#cb3-257" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb3-258"><a href="#cb3-258" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb3-259"><a href="#cb3-259" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb3-260"><a href="#cb3-260" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb3-261"><a href="#cb3-261" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-262"><a href="#cb3-262" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-263"><a href="#cb3-263" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-264"><a href="#cb3-264" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb3-265"><a href="#cb3-265" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb3-266"><a href="#cb3-266" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb3-267"><a href="#cb3-267" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb3-268"><a href="#cb3-268" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-269"><a href="#cb3-269" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-270"><a href="#cb3-270" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-271"><a href="#cb3-271" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-272"><a href="#cb3-272" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e13"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-273"><a href="#cb3-273" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-274"><a href="#cb3-274" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-275"><a href="#cb3-275" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-276"><a href="#cb3-276" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-277"><a href="#cb3-277" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb3-278"><a href="#cb3-278" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb3-279"><a href="#cb3-279" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb3-280"><a href="#cb3-280" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb3-281"><a href="#cb3-281" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-282"><a href="#cb3-282" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-283"><a href="#cb3-283" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-284"><a href="#cb3-284" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb3-285"><a href="#cb3-285" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb3-286"><a href="#cb3-286" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb3-287"><a href="#cb3-287" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb3-288"><a href="#cb3-288" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-289"><a href="#cb3-289" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-290"><a href="#cb3-290" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-291"><a href="#cb3-291" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-292"><a href="#cb3-292" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e24"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-293"><a href="#cb3-293" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-294"><a href="#cb3-294" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-295"><a href="#cb3-295" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-296"><a href="#cb3-296" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-297"><a href="#cb3-297" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb3-298"><a href="#cb3-298" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb3-299"><a href="#cb3-299" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb3-300"><a href="#cb3-300" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb3-301"><a href="#cb3-301" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-302"><a href="#cb3-302" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-303"><a href="#cb3-303" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-304"><a href="#cb3-304" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb3-305"><a href="#cb3-305" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb3-306"><a href="#cb3-306" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb3-307"><a href="#cb3-307" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb3-308"><a href="#cb3-308" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-309"><a href="#cb3-309" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-310"><a href="#cb3-310" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-311"><a href="#cb3-311" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-312"><a href="#cb3-312" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e25"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-313"><a href="#cb3-313" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-314"><a href="#cb3-314" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-315"><a href="#cb3-315" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-316"><a href="#cb3-316" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-317"><a href="#cb3-317" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb3-318"><a href="#cb3-318" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb3-319"><a href="#cb3-319" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb3-320"><a href="#cb3-320" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb3-321"><a href="#cb3-321" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-322"><a href="#cb3-322" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-323"><a href="#cb3-323" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-324"><a href="#cb3-324" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb3-325"><a href="#cb3-325" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb3-326"><a href="#cb3-326" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb3-327"><a href="#cb3-327" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb3-328"><a href="#cb3-328" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-329"><a href="#cb3-329" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-330"><a href="#cb3-330" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-331"><a href="#cb3-331" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-332"><a href="#cb3-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-333"><a href="#cb3-333" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-334"><a href="#cb3-334" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n1"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-335"><a href="#cb3-335" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-336"><a href="#cb3-336" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-337"><a href="#cb3-337" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-338"><a href="#cb3-338" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-339"><a href="#cb3-339" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb3-340"><a href="#cb3-340" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-341"><a href="#cb3-341" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-342"><a href="#cb3-342" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-343"><a href="#cb3-343" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">2</span>) <span class="op">+</span> <span class="st">", 50)"</span>)</span>
<span id="cb3-344"><a href="#cb3-344" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-345"><a href="#cb3-345" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-346"><a href="#cb3-346" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-347"><a href="#cb3-347" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-348"><a href="#cb3-348" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n1&gt;.balance"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-349"><a href="#cb3-349" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-350"><a href="#cb3-350" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-351"><a href="#cb3-351" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-352"><a href="#cb3-352" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-353"><a href="#cb3-353" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">textTween</span>(() <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"-2"</span> <span class="op">:</span> <span class="st">"+0"</span>))</span>
<span id="cb3-354"><a href="#cb3-354" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb3-355"><a href="#cb3-355" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">styleTween</span>(<span class="st">"font-weight"</span><span class="op">,</span> () <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"bold"</span> <span class="op">:</span><span class="st">"normal"</span>))</span>
<span id="cb3-356"><a href="#cb3-356" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-357"><a href="#cb3-357" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-358"><a href="#cb3-358" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-359"><a href="#cb3-359" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">text</span>(<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb3-360"><a href="#cb3-360" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#c00"</span>)</span>
<span id="cb3-361"><a href="#cb3-361" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb3-362"><a href="#cb3-362" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-363"><a href="#cb3-363" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-364"><a href="#cb3-364" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-365"><a href="#cb3-365" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-366"><a href="#cb3-366" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-367"><a href="#cb3-367" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n2"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-368"><a href="#cb3-368" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-369"><a href="#cb3-369" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-370"><a href="#cb3-370" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-371"><a href="#cb3-371" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-372"><a href="#cb3-372" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">2</span>) <span class="op">+</span> <span class="st">", 50)"</span>)</span>
<span id="cb3-373"><a href="#cb3-373" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-374"><a href="#cb3-374" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-375"><a href="#cb3-375" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-376"><a href="#cb3-376" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb3-377"><a href="#cb3-377" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-378"><a href="#cb3-378" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-379"><a href="#cb3-379" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-380"><a href="#cb3-380" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-381"><a href="#cb3-381" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n2&gt;.balance"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-382"><a href="#cb3-382" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-383"><a href="#cb3-383" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-384"><a href="#cb3-384" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-385"><a href="#cb3-385" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-386"><a href="#cb3-386" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">textTween</span>(() <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"-1"</span> <span class="op">:</span> <span class="st">"+0"</span>))</span>
<span id="cb3-387"><a href="#cb3-387" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb3-388"><a href="#cb3-388" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-389"><a href="#cb3-389" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-390"><a href="#cb3-390" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-391"><a href="#cb3-391" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">text</span>(<span class="st">"-1"</span>)</span>
<span id="cb3-392"><a href="#cb3-392" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#c00"</span>)</span>
<span id="cb3-393"><a href="#cb3-393" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-394"><a href="#cb3-394" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-395"><a href="#cb3-395" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-396"><a href="#cb3-396" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-397"><a href="#cb3-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-398"><a href="#cb3-398" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n3"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-399"><a href="#cb3-399" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-400"><a href="#cb3-400" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-401"><a href="#cb3-401" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-402"><a href="#cb3-402" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-403"><a href="#cb3-403" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb3-404"><a href="#cb3-404" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-405"><a href="#cb3-405" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-406"><a href="#cb3-406" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-407"><a href="#cb3-407" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb3-408"><a href="#cb3-408" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-409"><a href="#cb3-409" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-410"><a href="#cb3-410" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-411"><a href="#cb3-411" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-412"><a href="#cb3-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-413"><a href="#cb3-413" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n4"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-414"><a href="#cb3-414" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-415"><a href="#cb3-415" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-416"><a href="#cb3-416" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-417"><a href="#cb3-417" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-418"><a href="#cb3-418" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb3-419"><a href="#cb3-419" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-420"><a href="#cb3-420" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-421"><a href="#cb3-421" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-422"><a href="#cb3-422" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb3-423"><a href="#cb3-423" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-424"><a href="#cb3-424" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-425"><a href="#cb3-425" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-426"><a href="#cb3-426" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-427"><a href="#cb3-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-428"><a href="#cb3-428" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n5"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb3-429"><a href="#cb3-429" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb3-430"><a href="#cb3-430" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb3-431"><a href="#cb3-431" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb3-432"><a href="#cb3-432" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb3-433"><a href="#cb3-433" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb3-434"><a href="#cb3-434" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-435"><a href="#cb3-435" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-436"><a href="#cb3-436" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb3-437"><a href="#cb3-437" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb3-438"><a href="#cb3-438" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb3-439"><a href="#cb3-439" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb3-440"><a href="#cb3-440" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb3-441"><a href="#cb3-441" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-442"><a href="#cb3-442" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-443"><a href="#cb3-443" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> view<span class="op">;</span></span>
<span id="cb3-444"><a href="#cb3-444" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
<dl>
<dt>Left rotation</dt>
<dd>

</dd>
</dl>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="451" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 450;"><span id="cb4-451"><a href="#cb4-451" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb4-452"><a href="#cb4-452" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> view <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;figure&gt;&lt;svg width=</span><span class="sc">${</span>ewidth<span class="sc">}</span><span class="vs"> height="452"&gt;</span></span>
<span id="cb4-453"><a href="#cb4-453" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e12" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">" y1="50" x2="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y2="150" stroke="black" /&gt;</span></span>
<span id="cb4-454"><a href="#cb4-454" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e13" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">" y1="50" x2="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y2="150" stroke="black" /&gt;</span></span>
<span id="cb4-455"><a href="#cb4-455" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e24" x1="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y1="150" x2="</span><span class="sc">${</span><span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y2="250" stroke="black" /&gt;</span></span>
<span id="cb4-456"><a href="#cb4-456" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e25" x1="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y1="150" x2="</span><span class="sc">${</span><span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y2="250" stroke="black" /&gt;</span></span>
<span id="cb4-457"><a href="#cb4-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-458"><a href="#cb4-458" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n1" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">, 50)"&gt;</span></span>
<span id="cb4-459"><a href="#cb4-459" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="</span><span class="sc">${</span><span class="bu">root</span><span class="sc">}</span><span class="vs">" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb4-460"><a href="#cb4-460" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="value" fill="white" text-anchor="middle" alignment-baseline="central"&gt;root&lt;/text&gt;</span></span>
<span id="cb4-461"><a href="#cb4-461" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="balance" fill="#090" transform="translate(3, 25)" alignment-baseline="hanging" style="font-weight:bold"&gt;+2&lt;/text&gt;</span></span>
<span id="cb4-462"><a href="#cb4-462" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb4-463"><a href="#cb4-463" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n2" transform="translate(</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">, 150)"&gt;</span></span>
<span id="cb4-464"><a href="#cb4-464" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="</span><span class="sc">${</span>pivot<span class="sc">}</span><span class="vs">" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb4-465"><a href="#cb4-465" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="value" fill="white" text-anchor="middle" alignment-baseline="central"&gt;pivot&lt;/text&gt;</span></span>
<span id="cb4-466"><a href="#cb4-466" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="balance" fill="#090" transform="translate(3, 25)" alignment-baseline="hanging"&gt;+1&lt;/text&gt;</span></span>
<span id="cb4-467"><a href="#cb4-467" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb4-468"><a href="#cb4-468" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n3" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">, 150)"&gt;</span></span>
<span id="cb4-469"><a href="#cb4-469" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 100 -25, 100" fill="white" stroke="black" /&gt;</span></span>
<span id="cb4-470"><a href="#cb4-470" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="50" text-anchor="middle" alignment-baseline="central"&gt;h&lt;/text&gt;</span></span>
<span id="cb4-471"><a href="#cb4-471" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb4-472"><a href="#cb4-472" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n4" transform="translate(</span><span class="sc">${</span><span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">, 250)"&gt;</span></span>
<span id="cb4-473"><a href="#cb4-473" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 100 -25, 100" fill="white" stroke="black" /&gt;</span></span>
<span id="cb4-474"><a href="#cb4-474" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="50" text-anchor="middle" alignment-baseline="central"&gt;h&lt;/text&gt;</span></span>
<span id="cb4-475"><a href="#cb4-475" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;line x1="0" y1="100" x2="0" y2="175" stroke="black" stroke-dasharray="4" /&gt;</span></span>
<span id="cb4-476"><a href="#cb4-476" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle cy="175" r="10" stroke-dasharray="4" fill="white" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb4-477"><a href="#cb4-477" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb4-478"><a href="#cb4-478" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n5" transform="translate(</span><span class="sc">${</span><span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">, 250)"&gt;</span></span>
<span id="cb4-479"><a href="#cb4-479" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 100 -25, 100" fill="white" stroke="black" /&gt;</span></span>
<span id="cb4-480"><a href="#cb4-480" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="50" text-anchor="middle" alignment-baseline="central"&gt;h&lt;/text&gt;</span></span>
<span id="cb4-481"><a href="#cb4-481" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb4-482"><a href="#cb4-482" aria-hidden="true" tabindex="-1"></a><span class="vs"> &lt;/svg&gt;</span></span>
<span id="cb4-483"><a href="#cb4-483" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;figcaption style="max-width:640px;text-align:center"&gt;Balance Factors before &amp; after a single left rotation&lt;/figcaption&gt;&lt;/figure&gt;`</span><span class="op">;</span></span>
<span id="cb4-484"><a href="#cb4-484" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-485"><a href="#cb4-485" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tree_view <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(view)<span class="op">;</span></span>
<span id="cb4-486"><a href="#cb4-486" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> t <span class="op">=</span> d3<span class="op">.</span><span class="fu">transition</span>()<span class="op">;</span></span>
<span id="cb4-487"><a href="#cb4-487" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-488"><a href="#cb4-488" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e12"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-489"><a href="#cb4-489" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-490"><a href="#cb4-490" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-491"><a href="#cb4-491" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-492"><a href="#cb4-492" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-493"><a href="#cb4-493" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb4-494"><a href="#cb4-494" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb4-495"><a href="#cb4-495" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb4-496"><a href="#cb4-496" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb4-497"><a href="#cb4-497" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-498"><a href="#cb4-498" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-499"><a href="#cb4-499" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-500"><a href="#cb4-500" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb4-501"><a href="#cb4-501" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb4-502"><a href="#cb4-502" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb4-503"><a href="#cb4-503" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb4-504"><a href="#cb4-504" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-505"><a href="#cb4-505" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-506"><a href="#cb4-506" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-507"><a href="#cb4-507" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-508"><a href="#cb4-508" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e13"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-509"><a href="#cb4-509" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-510"><a href="#cb4-510" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-511"><a href="#cb4-511" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-512"><a href="#cb4-512" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-513"><a href="#cb4-513" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb4-514"><a href="#cb4-514" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb4-515"><a href="#cb4-515" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb4-516"><a href="#cb4-516" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb4-517"><a href="#cb4-517" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-518"><a href="#cb4-518" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-519"><a href="#cb4-519" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-520"><a href="#cb4-520" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb4-521"><a href="#cb4-521" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb4-522"><a href="#cb4-522" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb4-523"><a href="#cb4-523" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb4-524"><a href="#cb4-524" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-525"><a href="#cb4-525" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-526"><a href="#cb4-526" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-527"><a href="#cb4-527" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-528"><a href="#cb4-528" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e24"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-529"><a href="#cb4-529" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-530"><a href="#cb4-530" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-531"><a href="#cb4-531" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-532"><a href="#cb4-532" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-533"><a href="#cb4-533" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb4-534"><a href="#cb4-534" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb4-535"><a href="#cb4-535" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb4-536"><a href="#cb4-536" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb4-537"><a href="#cb4-537" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-538"><a href="#cb4-538" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-539"><a href="#cb4-539" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-540"><a href="#cb4-540" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb4-541"><a href="#cb4-541" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb4-542"><a href="#cb4-542" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb4-543"><a href="#cb4-543" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb4-544"><a href="#cb4-544" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-545"><a href="#cb4-545" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-546"><a href="#cb4-546" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-547"><a href="#cb4-547" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-548"><a href="#cb4-548" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e25"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-549"><a href="#cb4-549" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-550"><a href="#cb4-550" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-551"><a href="#cb4-551" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-552"><a href="#cb4-552" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-553"><a href="#cb4-553" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb4-554"><a href="#cb4-554" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb4-555"><a href="#cb4-555" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb4-556"><a href="#cb4-556" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb4-557"><a href="#cb4-557" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-558"><a href="#cb4-558" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-559"><a href="#cb4-559" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-560"><a href="#cb4-560" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb4-561"><a href="#cb4-561" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb4-562"><a href="#cb4-562" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb4-563"><a href="#cb4-563" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb4-564"><a href="#cb4-564" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-565"><a href="#cb4-565" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-566"><a href="#cb4-566" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-567"><a href="#cb4-567" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-568"><a href="#cb4-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-569"><a href="#cb4-569" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-570"><a href="#cb4-570" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n1"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-571"><a href="#cb4-571" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-572"><a href="#cb4-572" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-573"><a href="#cb4-573" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-574"><a href="#cb4-574" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-575"><a href="#cb4-575" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb4-576"><a href="#cb4-576" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-577"><a href="#cb4-577" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-578"><a href="#cb4-578" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-579"><a href="#cb4-579" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">2</span>) <span class="op">+</span> <span class="st">", 50)"</span>)</span>
<span id="cb4-580"><a href="#cb4-580" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-581"><a href="#cb4-581" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-582"><a href="#cb4-582" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-583"><a href="#cb4-583" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-584"><a href="#cb4-584" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n1&gt;.balance"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-585"><a href="#cb4-585" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-586"><a href="#cb4-586" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-587"><a href="#cb4-587" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-588"><a href="#cb4-588" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-589"><a href="#cb4-589" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">textTween</span>(() <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"+2"</span> <span class="op">:</span> <span class="st">"+0"</span>))</span>
<span id="cb4-590"><a href="#cb4-590" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb4-591"><a href="#cb4-591" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">styleTween</span>(<span class="st">"font-weight"</span><span class="op">,</span> () <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"bold"</span> <span class="op">:</span><span class="st">"normal"</span>))</span>
<span id="cb4-592"><a href="#cb4-592" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-593"><a href="#cb4-593" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-594"><a href="#cb4-594" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-595"><a href="#cb4-595" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">text</span>(<span class="st">"+2"</span>)</span>
<span id="cb4-596"><a href="#cb4-596" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#090"</span>)</span>
<span id="cb4-597"><a href="#cb4-597" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb4-598"><a href="#cb4-598" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-599"><a href="#cb4-599" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-600"><a href="#cb4-600" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-601"><a href="#cb4-601" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-602"><a href="#cb4-602" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-603"><a href="#cb4-603" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n2"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-604"><a href="#cb4-604" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-605"><a href="#cb4-605" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-606"><a href="#cb4-606" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-607"><a href="#cb4-607" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-608"><a href="#cb4-608" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">2</span>) <span class="op">+</span> <span class="st">", 50)"</span>)</span>
<span id="cb4-609"><a href="#cb4-609" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-610"><a href="#cb4-610" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-611"><a href="#cb4-611" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-612"><a href="#cb4-612" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb4-613"><a href="#cb4-613" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-614"><a href="#cb4-614" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-615"><a href="#cb4-615" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-616"><a href="#cb4-616" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-617"><a href="#cb4-617" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n2&gt;.balance"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-618"><a href="#cb4-618" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-619"><a href="#cb4-619" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-620"><a href="#cb4-620" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-621"><a href="#cb4-621" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-622"><a href="#cb4-622" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">textTween</span>(() <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"+1"</span> <span class="op">:</span> <span class="st">"+0"</span>))</span>
<span id="cb4-623"><a href="#cb4-623" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb4-624"><a href="#cb4-624" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-625"><a href="#cb4-625" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-626"><a href="#cb4-626" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-627"><a href="#cb4-627" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">text</span>(<span class="st">"+1"</span>)</span>
<span id="cb4-628"><a href="#cb4-628" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#090"</span>)</span>
<span id="cb4-629"><a href="#cb4-629" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-630"><a href="#cb4-630" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-631"><a href="#cb4-631" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-632"><a href="#cb4-632" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-633"><a href="#cb4-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-634"><a href="#cb4-634" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n3"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-635"><a href="#cb4-635" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-636"><a href="#cb4-636" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-637"><a href="#cb4-637" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-638"><a href="#cb4-638" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-639"><a href="#cb4-639" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> ( ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb4-640"><a href="#cb4-640" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-641"><a href="#cb4-641" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-642"><a href="#cb4-642" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-643"><a href="#cb4-643" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb4-644"><a href="#cb4-644" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-645"><a href="#cb4-645" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-646"><a href="#cb4-646" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-647"><a href="#cb4-647" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-648"><a href="#cb4-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-649"><a href="#cb4-649" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n4"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-650"><a href="#cb4-650" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-651"><a href="#cb4-651" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-652"><a href="#cb4-652" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-653"><a href="#cb4-653" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-654"><a href="#cb4-654" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb4-655"><a href="#cb4-655" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-656"><a href="#cb4-656" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-657"><a href="#cb4-657" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-658"><a href="#cb4-658" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb4-659"><a href="#cb4-659" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-660"><a href="#cb4-660" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-661"><a href="#cb4-661" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-662"><a href="#cb4-662" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-663"><a href="#cb4-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-664"><a href="#cb4-664" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n5"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb4-665"><a href="#cb4-665" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb4-666"><a href="#cb4-666" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb4-667"><a href="#cb4-667" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb4-668"><a href="#cb4-668" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb4-669"><a href="#cb4-669" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb4-670"><a href="#cb4-670" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-671"><a href="#cb4-671" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-672"><a href="#cb4-672" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb4-673"><a href="#cb4-673" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb4-674"><a href="#cb4-674" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb4-675"><a href="#cb4-675" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb4-676"><a href="#cb4-676" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb4-677"><a href="#cb4-677" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-678"><a href="#cb4-678" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-679"><a href="#cb4-679" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> view<span class="op">;</span></span>
<span id="cb4-680"><a href="#cb4-680" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="expression">

</div>
</div>
</div>
<p>A <strong>double rotation</strong> occurs when an unbalanced root has a pivot that is heavy in the opposite direction. In this case, if the root was left-heavy and the pivot right-heavy, the invariant can be restored by a doing a left and then a right rotation. The case when the root was right-heavy and the pivot left-heavy is symmetric, first it has to be done a right-rotation and then a left-rotation.</p>
<dl>
<dt>Left-right rotation</dt>
<dd>

</dd>
</dl>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="689" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 688;"><span id="cb5-689"><a href="#cb5-689" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb5-690"><a href="#cb5-690" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> view <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;figure&gt;&lt;svg width=</span><span class="sc">${</span>ewidth<span class="sc">}</span><span class="vs"> height="552"&gt;</span></span>
<span id="cb5-691"><a href="#cb5-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-692"><a href="#cb5-692" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e12" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">" y1="50" x2="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y2="150" stroke="black" /&gt;</span></span>
<span id="cb5-693"><a href="#cb5-693" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e13" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">" y1="50" x2="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y2="150" stroke="black" /&gt;</span></span>
<span id="cb5-694"><a href="#cb5-694" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e24" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y1="150" x2="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y2="250" stroke="black" /&gt;</span></span>
<span id="cb5-695"><a href="#cb5-695" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e25" x1="</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">" y1="150" x2="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y2="250" stroke="black" /&gt;</span></span>
<span id="cb5-696"><a href="#cb5-696" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e510" x1="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y1="250" x2="</span><span class="sc">${</span><span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span><span class="sc">}</span><span class="vs">" y2="350" stroke="black" /&gt;</span></span>
<span id="cb5-697"><a href="#cb5-697" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;line class="edge" id="e511" x1="</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">" y1="250" x2="</span><span class="sc">${</span><span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span><span class="sc">}</span><span class="vs">" y2="350" stroke="black" /&gt;</span></span>
<span id="cb5-698"><a href="#cb5-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-699"><a href="#cb5-699" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n1" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">, 50)"&gt;</span></span>
<span id="cb5-700"><a href="#cb5-700" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="</span><span class="sc">${</span><span class="bu">root</span><span class="sc">}</span><span class="vs">" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb5-701"><a href="#cb5-701" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="value" fill="white" text-anchor="middle" alignment-baseline="central"&gt;root&lt;/text&gt;</span></span>
<span id="cb5-702"><a href="#cb5-702" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="balance" fill="#C00" transform="translate(3, 25)" alignment-baseline="hanging" style="font-weight:bold"&gt;-2&lt;/text&gt;</span></span>
<span id="cb5-703"><a href="#cb5-703" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb5-704"><a href="#cb5-704" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n2" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">, 150)"&gt;</span></span>
<span id="cb5-705"><a href="#cb5-705" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="</span><span class="sc">${</span>pivot<span class="sc">}</span><span class="vs">" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb5-706"><a href="#cb5-706" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="value" fill="white" text-anchor="middle" alignment-baseline="central"&gt;pivot&lt;/text&gt;</span></span>
<span id="cb5-707"><a href="#cb5-707" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="balance" fill="#090" transform="translate(3, 25)" alignment-baseline="hanging"&gt;+1&lt;/text&gt;</span></span>
<span id="cb5-708"><a href="#cb5-708" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb5-709"><a href="#cb5-709" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n3" transform="translate(</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span><span class="sc">}</span><span class="vs">, 150)"&gt;</span></span>
<span id="cb5-710"><a href="#cb5-710" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 200 -25, 200" fill="white" stroke="black" /&gt;</span></span>
<span id="cb5-711"><a href="#cb5-711" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="125" text-anchor="middle" alignment-baseline="central"&gt;h+1&lt;/text&gt;</span></span>
<span id="cb5-712"><a href="#cb5-712" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb5-713"><a href="#cb5-713" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n4" transform="translate(</span><span class="sc">${</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">, 250)"&gt;</span></span>
<span id="cb5-714"><a href="#cb5-714" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 200 -25, 200" fill="white" stroke="black" /&gt;</span></span>
<span id="cb5-715"><a href="#cb5-715" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="125" text-anchor="middle" alignment-baseline="central"&gt;h+1&lt;/text&gt;</span></span>
<span id="cb5-716"><a href="#cb5-716" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb5-717"><a href="#cb5-717" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n5" transform="translate(</span><span class="sc">${</span><span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span><span class="sc">}</span><span class="vs">, 250)"&gt;</span></span>
<span id="cb5-718"><a href="#cb5-718" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle r="25" fill="</span><span class="sc">${</span>secondary<span class="sc">}</span><span class="vs">" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb5-719"><a href="#cb5-719" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="value" fill="white" text-anchor="middle" alignment-baseline="central"&gt;sec&lt;/text&gt;</span></span>
<span id="cb5-720"><a href="#cb5-720" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text class="balance" fill="#C00" transform="translate(15, 20)" alignment-baseline="hanging"&gt;-1&lt;/text&gt;</span></span>
<span id="cb5-721"><a href="#cb5-721" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb5-722"><a href="#cb5-722" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n10" transform="translate(</span><span class="sc">${</span><span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span><span class="sc">}</span><span class="vs">, 350)"&gt;</span></span>
<span id="cb5-723"><a href="#cb5-723" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 100 -25, 100" fill="white" stroke="black" /&gt;</span></span>
<span id="cb5-724"><a href="#cb5-724" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="50" text-anchor="middle" alignment-baseline="central"&gt;h&lt;/text&gt;</span></span>
<span id="cb5-725"><a href="#cb5-725" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;line x1="0" y1="100" x2="0" y2="175" stroke="black" stroke-dasharray="4" /&gt;</span></span>
<span id="cb5-726"><a href="#cb5-726" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle cy="175" r="10" stroke-dasharray="4" fill="white" stroke="black"&gt;&lt;/circle&gt;</span></span>
<span id="cb5-727"><a href="#cb5-727" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb5-728"><a href="#cb5-728" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;g class="node" id="n11" transform="translate(</span><span class="sc">${</span><span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span><span class="sc">}</span><span class="vs">, 350)"&gt;</span></span>
<span id="cb5-729"><a href="#cb5-729" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;polygon points="0, 0 25, 100 -25, 100" fill="white" stroke="black" /&gt;</span></span>
<span id="cb5-730"><a href="#cb5-730" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;text fill="black" y="50" text-anchor="middle" alignment-baseline="central"&gt;h&lt;/text&gt;</span></span>
<span id="cb5-731"><a href="#cb5-731" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;line x1="0" y1="100" x2="0" y2="175" stroke="black" stroke-dasharray="4" visibility="hidden" /&gt;</span></span>
<span id="cb5-732"><a href="#cb5-732" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;circle cy="175" r="10" stroke-dasharray="4" fill="white" stroke="black" visibility="hidden" &gt;&lt;/circle&gt;</span></span>
<span id="cb5-733"><a href="#cb5-733" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/g&gt;</span></span>
<span id="cb5-734"><a href="#cb5-734" aria-hidden="true" tabindex="-1"></a><span class="vs"> &lt;/svg&gt;</span></span>
<span id="cb5-735"><a href="#cb5-735" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;figcaption style="max-width:640px;text-align:center"&gt;Balance Factors before &amp; after a left-right double rotation&lt;/figcaption&gt;&lt;/figure&gt;`</span><span class="op">;</span></span>
<span id="cb5-736"><a href="#cb5-736" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-737"><a href="#cb5-737" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tree_view <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(view)<span class="op">;</span></span>
<span id="cb5-738"><a href="#cb5-738" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> t <span class="op">=</span> d3<span class="op">.</span><span class="fu">transition</span>()<span class="op">;</span></span>
<span id="cb5-739"><a href="#cb5-739" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-740"><a href="#cb5-740" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e12"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-741"><a href="#cb5-741" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-742"><a href="#cb5-742" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-743"><a href="#cb5-743" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-744"><a href="#cb5-744" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-745"><a href="#cb5-745" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-746"><a href="#cb5-746" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-747"><a href="#cb5-747" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-748"><a href="#cb5-748" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-749"><a href="#cb5-749" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb5-750"><a href="#cb5-750" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb5-751"><a href="#cb5-751" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-752"><a href="#cb5-752" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-753"><a href="#cb5-753" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-754"><a href="#cb5-754" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb5-755"><a href="#cb5-755" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb5-756"><a href="#cb5-756" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>) </span>
<span id="cb5-757"><a href="#cb5-757" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-758"><a href="#cb5-758" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-759"><a href="#cb5-759" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-760"><a href="#cb5-760" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-761"><a href="#cb5-761" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-762"><a href="#cb5-762" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e13"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-763"><a href="#cb5-763" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-764"><a href="#cb5-764" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-765"><a href="#cb5-765" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-766"><a href="#cb5-766" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-767"><a href="#cb5-767" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-768"><a href="#cb5-768" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-769"><a href="#cb5-769" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-770"><a href="#cb5-770" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-771"><a href="#cb5-771" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-772"><a href="#cb5-772" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-773"><a href="#cb5-773" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-774"><a href="#cb5-774" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-775"><a href="#cb5-775" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-776"><a href="#cb5-776" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb5-777"><a href="#cb5-777" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb5-778"><a href="#cb5-778" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-779"><a href="#cb5-779" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-780"><a href="#cb5-780" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-781"><a href="#cb5-781" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-782"><a href="#cb5-782" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-783"><a href="#cb5-783" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-784"><a href="#cb5-784" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e24"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-785"><a href="#cb5-785" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-786"><a href="#cb5-786" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-787"><a href="#cb5-787" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-788"><a href="#cb5-788" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-789"><a href="#cb5-789" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-790"><a href="#cb5-790" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-791"><a href="#cb5-791" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">16</span>)</span>
<span id="cb5-792"><a href="#cb5-792" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">350</span>)</span>
<span id="cb5-793"><a href="#cb5-793" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-794"><a href="#cb5-794" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-795"><a href="#cb5-795" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-796"><a href="#cb5-796" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-797"><a href="#cb5-797" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-798"><a href="#cb5-798" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-799"><a href="#cb5-799" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-800"><a href="#cb5-800" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-801"><a href="#cb5-801" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-802"><a href="#cb5-802" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-803"><a href="#cb5-803" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-804"><a href="#cb5-804" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-805"><a href="#cb5-805" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-806"><a href="#cb5-806" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e25"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-807"><a href="#cb5-807" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-808"><a href="#cb5-808" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-809"><a href="#cb5-809" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-810"><a href="#cb5-810" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-811"><a href="#cb5-811" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-812"><a href="#cb5-812" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-813"><a href="#cb5-813" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-814"><a href="#cb5-814" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-815"><a href="#cb5-815" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-816"><a href="#cb5-816" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-817"><a href="#cb5-817" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-818"><a href="#cb5-818" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-819"><a href="#cb5-819" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb5-820"><a href="#cb5-820" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">50</span>)</span>
<span id="cb5-821"><a href="#cb5-821" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-822"><a href="#cb5-822" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-823"><a href="#cb5-823" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-824"><a href="#cb5-824" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-825"><a href="#cb5-825" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-826"><a href="#cb5-826" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-827"><a href="#cb5-827" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-828"><a href="#cb5-828" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-829"><a href="#cb5-829" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-830"><a href="#cb5-830" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-831"><a href="#cb5-831" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-832"><a href="#cb5-832" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e510"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-833"><a href="#cb5-833" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-834"><a href="#cb5-834" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-835"><a href="#cb5-835" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-836"><a href="#cb5-836" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-837"><a href="#cb5-837" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-838"><a href="#cb5-838" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-839"><a href="#cb5-839" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span>)</span>
<span id="cb5-840"><a href="#cb5-840" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">350</span>)</span>
<span id="cb5-841"><a href="#cb5-841" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-842"><a href="#cb5-842" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-843"><a href="#cb5-843" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-844"><a href="#cb5-844" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-845"><a href="#cb5-845" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-846"><a href="#cb5-846" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-847"><a href="#cb5-847" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-848"><a href="#cb5-848" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-849"><a href="#cb5-849" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-850"><a href="#cb5-850" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-851"><a href="#cb5-851" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-852"><a href="#cb5-852" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span>)</span>
<span id="cb5-853"><a href="#cb5-853" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">350</span>)</span>
<span id="cb5-854"><a href="#cb5-854" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-855"><a href="#cb5-855" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-856"><a href="#cb5-856" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-857"><a href="#cb5-857" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-858"><a href="#cb5-858" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#e511"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-859"><a href="#cb5-859" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-860"><a href="#cb5-860" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-861"><a href="#cb5-861" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-862"><a href="#cb5-862" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-863"><a href="#cb5-863" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-864"><a href="#cb5-864" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-865"><a href="#cb5-865" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-866"><a href="#cb5-866" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-867"><a href="#cb5-867" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-868"><a href="#cb5-868" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-869"><a href="#cb5-869" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb5-870"><a href="#cb5-870" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">150</span>)</span>
<span id="cb5-871"><a href="#cb5-871" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-872"><a href="#cb5-872" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-873"><a href="#cb5-873" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-874"><a href="#cb5-874" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-875"><a href="#cb5-875" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-876"><a href="#cb5-876" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>)</span>
<span id="cb5-877"><a href="#cb5-877" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">250</span>)</span>
<span id="cb5-878"><a href="#cb5-878" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span>)</span>
<span id="cb5-879"><a href="#cb5-879" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="dv">350</span>)</span>
<span id="cb5-880"><a href="#cb5-880" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-881"><a href="#cb5-881" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-882"><a href="#cb5-882" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-883"><a href="#cb5-883" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-884"><a href="#cb5-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-885"><a href="#cb5-885" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-886"><a href="#cb5-886" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n1"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-887"><a href="#cb5-887" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-888"><a href="#cb5-888" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-889"><a href="#cb5-889" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-890"><a href="#cb5-890" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-891"><a href="#cb5-891" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-892"><a href="#cb5-892" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-893"><a href="#cb5-893" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb5-894"><a href="#cb5-894" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-895"><a href="#cb5-895" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-896"><a href="#cb5-896" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-897"><a href="#cb5-897" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">2</span>) <span class="op">+</span> <span class="st">", 50)"</span>)</span>
<span id="cb5-898"><a href="#cb5-898" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-899"><a href="#cb5-899" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-900"><a href="#cb5-900" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-901"><a href="#cb5-901" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-902"><a href="#cb5-902" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n1&gt;.balance"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-903"><a href="#cb5-903" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-904"><a href="#cb5-904" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-905"><a href="#cb5-905" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-906"><a href="#cb5-906" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-907"><a href="#cb5-907" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-908"><a href="#cb5-908" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-909"><a href="#cb5-909" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">textTween</span>(() <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"-2"</span> <span class="op">:</span> <span class="st">"+1"</span>))</span>
<span id="cb5-910"><a href="#cb5-910" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#090"</span>)</span>
<span id="cb5-911"><a href="#cb5-911" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">styleTween</span>(<span class="st">"font-weight"</span><span class="op">,</span> () <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"bold"</span> <span class="op">:</span><span class="st">"normal"</span>))</span>
<span id="cb5-912"><a href="#cb5-912" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-913"><a href="#cb5-913" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-914"><a href="#cb5-914" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-915"><a href="#cb5-915" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">text</span>(<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb5-916"><a href="#cb5-916" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#c00"</span>)</span>
<span id="cb5-917"><a href="#cb5-917" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb5-918"><a href="#cb5-918" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-919"><a href="#cb5-919" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-920"><a href="#cb5-920" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-921"><a href="#cb5-921" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-922"><a href="#cb5-922" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-923"><a href="#cb5-923" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n2"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-924"><a href="#cb5-924" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-925"><a href="#cb5-925" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-926"><a href="#cb5-926" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-927"><a href="#cb5-927" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-928"><a href="#cb5-928" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb5-929"><a href="#cb5-929" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-930"><a href="#cb5-930" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-931"><a href="#cb5-931" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb5-932"><a href="#cb5-932" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-933"><a href="#cb5-933" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-934"><a href="#cb5-934" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-935"><a href="#cb5-935" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-936"><a href="#cb5-936" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-937"><a href="#cb5-937" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-938"><a href="#cb5-938" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-939"><a href="#cb5-939" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n2&gt;.balance"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-940"><a href="#cb5-940" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-941"><a href="#cb5-941" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-942"><a href="#cb5-942" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-943"><a href="#cb5-943" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-944"><a href="#cb5-944" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">textTween</span>(() <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"+1"</span> <span class="op">:</span> <span class="st">"+0"</span>))</span>
<span id="cb5-945"><a href="#cb5-945" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb5-946"><a href="#cb5-946" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate(15,20)"</span>)</span>
<span id="cb5-947"><a href="#cb5-947" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-948"><a href="#cb5-948" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-949"><a href="#cb5-949" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate(3,25)"</span>)</span>
<span id="cb5-950"><a href="#cb5-950" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-951"><a href="#cb5-951" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-952"><a href="#cb5-952" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-953"><a href="#cb5-953" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">text</span>(<span class="st">"+1"</span>)</span>
<span id="cb5-954"><a href="#cb5-954" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#090"</span>)</span>
<span id="cb5-955"><a href="#cb5-955" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-956"><a href="#cb5-956" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-957"><a href="#cb5-957" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-958"><a href="#cb5-958" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-959"><a href="#cb5-959" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-960"><a href="#cb5-960" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n3"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-961"><a href="#cb5-961" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-962"><a href="#cb5-962" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-963"><a href="#cb5-963" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-964"><a href="#cb5-964" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-965"><a href="#cb5-965" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-966"><a href="#cb5-966" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-967"><a href="#cb5-967" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb5-968"><a href="#cb5-968" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-969"><a href="#cb5-969" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-970"><a href="#cb5-970" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-971"><a href="#cb5-971" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb5-972"><a href="#cb5-972" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-973"><a href="#cb5-973" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-974"><a href="#cb5-974" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-975"><a href="#cb5-975" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-976"><a href="#cb5-976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-977"><a href="#cb5-977" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n4"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-978"><a href="#cb5-978" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-979"><a href="#cb5-979" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-980"><a href="#cb5-980" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-981"><a href="#cb5-981" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-982"><a href="#cb5-982" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">16</span>) <span class="op">+</span> <span class="st">", 350)"</span>)</span>
<span id="cb5-983"><a href="#cb5-983" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-984"><a href="#cb5-984" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-985"><a href="#cb5-985" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb5-986"><a href="#cb5-986" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-987"><a href="#cb5-987" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-988"><a href="#cb5-988" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-989"><a href="#cb5-989" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-990"><a href="#cb5-990" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-991"><a href="#cb5-991" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-992"><a href="#cb5-992" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-993"><a href="#cb5-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-994"><a href="#cb5-994" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n5"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-995"><a href="#cb5-995" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-996"><a href="#cb5-996" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-997"><a href="#cb5-997" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-998"><a href="#cb5-998" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-999"><a href="#cb5-999" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">4</span>) <span class="op">+</span> <span class="st">", 150)"</span>)</span>
<span id="cb5-1000"><a href="#cb5-1000" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1001"><a href="#cb5-1001" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-1002"><a href="#cb5-1002" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (ewidth<span class="op">/</span><span class="dv">2</span>) <span class="op">+</span> <span class="st">", 50)"</span>)</span>
<span id="cb5-1003"><a href="#cb5-1003" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1004"><a href="#cb5-1004" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-1005"><a href="#cb5-1005" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-1006"><a href="#cb5-1006" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb5-1007"><a href="#cb5-1007" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1008"><a href="#cb5-1008" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-1009"><a href="#cb5-1009" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-1010"><a href="#cb5-1010" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-1011"><a href="#cb5-1011" aria-hidden="true" tabindex="-1"></a>  tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n5&gt;.balance"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-1012"><a href="#cb5-1012" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-1013"><a href="#cb5-1013" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-1014"><a href="#cb5-1014" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-1015"><a href="#cb5-1015" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-1016"><a href="#cb5-1016" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate(3, 25)"</span>)</span>
<span id="cb5-1017"><a href="#cb5-1017" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">textTween</span>(() <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"-1"</span> <span class="op">:</span> <span class="st">"-2"</span>))</span>
<span id="cb5-1018"><a href="#cb5-1018" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">styleTween</span>(<span class="st">"font-weight"</span><span class="op">,</span> () <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"normal"</span> <span class="op">:</span><span class="st">"bold"</span>))</span>
<span id="cb5-1019"><a href="#cb5-1019" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1020"><a href="#cb5-1020" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-1021"><a href="#cb5-1021" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">textTween</span>(() <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"-2"</span> <span class="op">:</span> <span class="st">"+0"</span>))</span>
<span id="cb5-1022"><a href="#cb5-1022" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb5-1023"><a href="#cb5-1023" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">styleTween</span>(<span class="st">"font-weight"</span><span class="op">,</span> () <span class="kw">=&gt;</span> ((t) <span class="kw">=&gt;</span> t <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"bold"</span> <span class="op">:</span><span class="st">"normal"</span>))</span>
<span id="cb5-1024"><a href="#cb5-1024" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1025"><a href="#cb5-1025" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-1026"><a href="#cb5-1026" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-1027"><a href="#cb5-1027" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">text</span>(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb5-1028"><a href="#cb5-1028" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#c00"</span>)</span>
<span id="cb5-1029"><a href="#cb5-1029" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">style</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"normal"</span>)</span>
<span id="cb5-1030"><a href="#cb5-1030" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate(15, 20)"</span>)</span>
<span id="cb5-1031"><a href="#cb5-1031" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1032"><a href="#cb5-1032" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-1033"><a href="#cb5-1033" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-1034"><a href="#cb5-1034" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb5-1035"><a href="#cb5-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1036"><a href="#cb5-1036" aria-hidden="true" tabindex="-1"></a>    tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n10"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-1037"><a href="#cb5-1037" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-1038"><a href="#cb5-1038" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-1039"><a href="#cb5-1039" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-1040"><a href="#cb5-1040" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-1041"><a href="#cb5-1041" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span>) <span class="op">+</span> <span class="st">", 350)"</span>)</span>
<span id="cb5-1042"><a href="#cb5-1042" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1043"><a href="#cb5-1043" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-1044"><a href="#cb5-1044" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb5-1045"><a href="#cb5-1045" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1046"><a href="#cb5-1046" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-1047"><a href="#cb5-1047" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-1048"><a href="#cb5-1048" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span>) <span class="op">+</span> <span class="st">", 350)"</span>)</span>
<span id="cb5-1049"><a href="#cb5-1049" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1050"><a href="#cb5-1050" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-1051"><a href="#cb5-1051" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-1052"><a href="#cb5-1052" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb5-1053"><a href="#cb5-1053" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1054"><a href="#cb5-1054" aria-hidden="true" tabindex="-1"></a>    tree_view<span class="op">.</span><span class="fu">select</span>(<span class="st">"#n11"</span>)<span class="op">.</span><span class="fu">transition</span>(t)</span>
<span id="cb5-1055"><a href="#cb5-1055" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)</span>
<span id="cb5-1056"><a href="#cb5-1056" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> <span class="kw">function</span> <span class="fu">repeat</span>() {</span>
<span id="cb5-1057"><a href="#cb5-1057" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">active</span>(<span class="kw">this</span>)</span>
<span id="cb5-1058"><a href="#cb5-1058" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-1059"><a href="#cb5-1059" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">3</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb5-1060"><a href="#cb5-1060" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1061"><a href="#cb5-1061" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(dur)</span>
<span id="cb5-1062"><a href="#cb5-1062" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">5</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">8</span>) <span class="op">+</span> <span class="st">", 250)"</span>)</span>
<span id="cb5-1063"><a href="#cb5-1063" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1064"><a href="#cb5-1064" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-1065"><a href="#cb5-1065" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="dv">0</span>)</span>
<span id="cb5-1066"><a href="#cb5-1066" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> (<span class="dv">7</span><span class="op">*</span>ewidth<span class="op">/</span><span class="dv">16</span>) <span class="op">+</span> <span class="st">", 350)"</span>)</span>
<span id="cb5-1067"><a href="#cb5-1067" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb5-1068"><a href="#cb5-1068" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">delay</span>(dur)</span>
<span id="cb5-1069"><a href="#cb5-1069" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> repeat)<span class="op">;</span></span>
<span id="cb5-1070"><a href="#cb5-1070" aria-hidden="true" tabindex="-1"></a>     })<span class="op">;</span></span>
<span id="cb5-1071"><a href="#cb5-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1072"><a href="#cb5-1072" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> view<span class="op">;</span></span>
<span id="cb5-1073"><a href="#cb5-1073" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="expression">

</div>
</div>
</div>
<dl>
<dt>Left-right rotation</dt>
<dd>
analogous to the case above, just symmetric.
</dd>
</dl>
<p><strong>Credits</strong>: the animations of the all the rotations are from <a href="https://observablehq.com/@infowantstobeseen/avl-trees-understanding-rotations">this blog-post</a> on understanding AVL rotations.</p>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>See the theory slides of EDA.</p>
</div>
</div>
</div>
<p><a href="javascript:history.back()"><iconify-icon role="img" inline="" icon="twemoji:back-arrow" style="font-size: 2em;" aria-label="Icon back-arrow from twemoji Iconify.design set." title="Icon back-arrow from twemoji Iconify.design set."></iconify-icon></a></p>


</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImQzID0gcmVxdWlyZShcImQzLXNlbGVjdGlvbkAxLjRcIiwgXCJkMy10cmFuc2l0aW9uQDEuM1wiLCBcImQzLWVhc2VcIiwgXCJkMy1pbnRlcnBvbGF0ZVwiLCBcImQzLXNjYWxlLWNocm9tYXRpY0AxLjVcIilcbmV3aWR0aCA9IE1hdGgubWluKHdpZHRoLCA2NDApXG5kdXIgPSAyMDAwXG5yb290ID0gZDMuc2NoZW1lQ2F0ZWdvcnkxMFswXVxucGl2b3QgPSBkMy5zY2hlbWVDYXRlZ29yeTEwWzFdXG5zZWNvbmRhcnkgPSBkMy5zY2hlbWVDYXRlZ29yeTEwWzRdXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJodG1sYDxmaWd1cmU+PHN2ZyB3aWR0aD0ke2V3aWR0aH0gaGVpZ2h0PVwiNDAwXCI+XG4gICAgPGxpbmUgY2xhc3M9XCJlZGdlXCIgaWQ9XCJlNTRcIiB4MT1cIiR7ZXdpZHRoLzJ9XCIgeTE9XCI1MFwiIHgyPVwiJHtld2lkdGgvNH1cIiB5Mj1cIjE1MFwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImU1N1wiIHgxPVwiJHtld2lkdGgvMn1cIiB5MT1cIjUwXCIgeDI9XCIkezMqZXdpZHRoLzR9XCIgeTI9XCIxNTBcIiBzdHJva2U9XCJibGFja1wiIC8+XG4gICAgPGxpbmUgY2xhc3M9XCJlZGdlXCIgaWQ9XCJlNDJcIiB4MT1cIiR7ZXdpZHRoLzR9XCIgeTE9XCIxNTBcIiB4Mj1cIiR7ZXdpZHRoLzh9XCIgeTI9XCIyNTBcIiBzdHJva2U9XCJibGFja1wiIC8+XG4gICAgPGxpbmUgY2xhc3M9XCJlZGdlXCIgaWQ9XCJlNzZcIiB4MT1cIiR7Mypld2lkdGgvNH1cIiB5MT1cIjE1MFwiIHgyPVwiJHs1KmV3aWR0aC84fVwiIHkyPVwiMjUwXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgIDxsaW5lIGNsYXNzPVwiZWRnZVwiIGlkPVwiZTc4XCIgeDE9XCIkezMqZXdpZHRoLzR9XCIgeTE9XCIxNTBcIiB4Mj1cIiR7Nypld2lkdGgvOH1cIiB5Mj1cIjI1MFwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImUyM1wiIHgxPVwiJHtld2lkdGgvOH1cIiB5MT1cIjI1MFwiIHgyPVwiJHszKmV3aWR0aC8xNn1cIiB5Mj1cIjM1MFwiIHN0cm9rZT1cImJsYWNrXCIgLz5cblxuICAgIDxnIGNsYXNzPVwibm9kZVwiIGlkPVwibjVcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoJHtld2lkdGgvMn0sIDUwKVwiPlxuICAgICAgPGNpcmNsZSByPVwiMjVcIiBmaWxsPVwid2hpdGVcIiBzdHJva2U9XCJibGFja1wiPjwvY2lyY2xlPlxuICAgICAgPHRleHQgZmlsbD1cImJsYWNrXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJjZW50cmFsXCI+NTwvdGV4dD5cbiAgICAgIDx0ZXh0IGZpbGw9XCIjQzAwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDMsIDI1KVwiIGFsaWdubWVudC1iYXNlbGluZT1cImhhbmdpbmdcIj4tMTwvdGV4dD5cbiAgICA8L2c+XG4gICAgPGcgY2xhc3M9XCJub2RlXCIgaWQ9XCJuNFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgke2V3aWR0aC80fSwgMTUwKVwiPlxuICAgICAgPGNpcmNsZSByPVwiMjVcIiBmaWxsPVwiJHtyb290fVwiIHN0cm9rZT1cImJsYWNrXCI+PC9jaXJjbGU+XG4gICAgICA8dGV4dCBmaWxsPVwid2hpdGVcIiB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiIGFsaWdubWVudC1iYXNlbGluZT1cImNlbnRyYWxcIj40PC90ZXh0PlxuICAgICAgPHRleHQgZmlsbD1cIiNDMDBcIiBmb250LXdlaWdodD1cImJvbGRcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMywgMjUpXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiaGFuZ2luZ1wiPi0yPC90ZXh0PlxuICAgIDwvZz5cbiAgICA8ZyBjbGFzcz1cIm5vZGVcIiBpZD1cIm43XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKCR7Mypld2lkdGgvNH0sIDE1MClcIj5cbiAgICAgIDxjaXJjbGUgcj1cIjI1XCIgZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwiYmxhY2tcIj48L2NpcmNsZT5cbiAgICAgIDx0ZXh0IGZpbGw9XCJibGFja1wiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPjc8L3RleHQ+XG4gICAgICA8dGV4dCBmaWxsPVwiI2JsYWNrXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDMsIDI1KVwiIGFsaWdubWVudC1iYXNlbGluZT1cImhhbmdpbmdcIj4rMDwvdGV4dD5cbiAgICA8L2c+XG4gICAgPGcgY2xhc3M9XCJub2RlXCIgaWQ9XCJuMlwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgke2V3aWR0aC84fSwgMjUwKVwiPlxuICAgICAgPGNpcmNsZSByPVwiMjVcIiBmaWxsPVwid2hpdGVcIiBzdHJva2U9XCJibGFja1wiPjwvY2lyY2xlPlxuICAgICAgPHRleHQgZmlsbD1cImJsYWNrXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJjZW50cmFsXCI+MjwvdGV4dD5cbiAgICAgIDx0ZXh0IGZpbGw9XCIjMDkwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDE1LCAyMClcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJoYW5naW5nXCI+KzE8L3RleHQ+XG4gICAgPC9nPlxuICAgIDxnIGNsYXNzPVwibm9kZVwiIGlkPVwibjZcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoJHs1KmV3aWR0aC84fSwgMjUwKVwiPlxuICAgICAgPGNpcmNsZSByPVwiMjVcIiBmaWxsPVwid2hpdGVcIiBzdHJva2U9XCJibGFja1wiPjwvY2lyY2xlPlxuICAgICAgPHRleHQgZmlsbD1cImJsYWNrXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJjZW50cmFsXCI+NjwvdGV4dD5cbiAgICAgIDx0ZXh0IGZpbGw9XCJibGFja1wiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgzLCAyNSlcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJoYW5naW5nXCI+KzA8L3RleHQ+XG4gICAgPC9nPlxuICAgIDxnIGNsYXNzPVwibm9kZVwiIGlkPVwibjhcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoJHs3KmV3aWR0aC84fSwgMjUwKVwiPlxuICAgICAgPGNpcmNsZSByPVwiMjVcIiBmaWxsPVwid2hpdGVcIiBzdHJva2U9XCJibGFja1wiPjwvY2lyY2xlPlxuICAgICAgPHRleHQgZmlsbD1cImJsYWNrXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJjZW50cmFsXCI+ODwvdGV4dD5cbiAgICAgIDx0ZXh0IGZpbGw9XCJibGFja1wiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgzLCAyNSlcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJoYW5naW5nXCI+KzA8L3RleHQ+XG4gICAgPC9nPlxuICAgIDxnIGNsYXNzPVwibm9kZVwiIGlkPVwibjNcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoJHszKmV3aWR0aC8xNn0sIDM1MClcIj5cbiAgICAgIDxjaXJjbGUgcj1cIjI1XCIgZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwiYmxhY2tcIj48L2NpcmNsZT5cbiAgICAgIDx0ZXh0IGZpbGw9XCJibGFja1wiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPjM8L3RleHQ+XG4gICAgICA8dGV4dCBmaWxsPVwiYmxhY2tcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMywgMjUpXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiaGFuZ2luZ1wiPiswPC90ZXh0PlxuICAgIDwvZz5cbiAgPC9zdmc+XG4gIDxmaWdjYXB0aW9uIHN0eWxlPVwibWF4LXdpZHRoOjY0MHB4O3RleHQtYWxpZ246Y2VudGVyXCI+QmFsYW5jZSBGYWN0b3JzLiA8c3BhbiBzdHlsZT1cImNvbG9yOiAjQzAwXCI+UmVkPC9zcGFuPiBpbmRpY2F0ZXMgbGVmdC1oZWF2eSwgPHNwYW4gc3R5bGU9XCJjb2xvcjogIzA5MFwiPmdyZWVuPC9zcGFuPiByaWdodC1oZWF2eSwgPHNwYW4gc3R5bGU9XCJmb250LXdlaWdodDpib2xkXCI+Ym9sZDwvc3Bhbj4gaW5kaWNhdGVzIHdoZXJlIHRyZWUgaXMgdW5iYWxhbmNlZC48L2ZpZ2NhcHRpb24+IDwvZmlndXJlPmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcbiAgY29uc3QgdmlldyA9IGh0bWxgPGZpZ3VyZT48c3ZnIHdpZHRoPSR7ZXdpZHRofSBoZWlnaHQ9XCI0NTJcIj5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImUxMlwiIHgxPVwiJHtld2lkdGgvMn1cIiB5MT1cIjUwXCIgeDI9XCIke2V3aWR0aC80fVwiIHkyPVwiMTUwXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgIDxsaW5lIGNsYXNzPVwiZWRnZVwiIGlkPVwiZTEzXCIgeDE9XCIke2V3aWR0aC8yfVwiIHkxPVwiNTBcIiB4Mj1cIiR7Mypld2lkdGgvNH1cIiB5Mj1cIjE1MFwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImUyNFwiIHgxPVwiJHtld2lkdGgvNH1cIiB5MT1cIjE1MFwiIHgyPVwiJHtld2lkdGgvOH1cIiB5Mj1cIjI1MFwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImUyNVwiIHgxPVwiJHtld2lkdGgvNH1cIiB5MT1cIjE1MFwiIHgyPVwiJHszKmV3aWR0aC84fVwiIHkyPVwiMjUwXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuXG4gICAgPGcgY2xhc3M9XCJub2RlXCIgaWQ9XCJuMVwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgke2V3aWR0aC8yfSwgNTApXCI+XG4gICAgICA8Y2lyY2xlIHI9XCIyNVwiIGZpbGw9XCIke3Jvb3R9XCIgc3Ryb2tlPVwiYmxhY2tcIj48L2NpcmNsZT5cbiAgICAgIDx0ZXh0IGNsYXNzPVwidmFsdWVcIiBmaWxsPVwid2hpdGVcIiB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiIGFsaWdubWVudC1iYXNlbGluZT1cImNlbnRyYWxcIj5yb290PC90ZXh0PlxuICAgICAgPHRleHQgY2xhc3M9XCJiYWxhbmNlXCIgZmlsbD1cIiNDMDBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMywgMjUpXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiaGFuZ2luZ1wiIHN0eWxlPVwiZm9udC13ZWlnaHQ6Ym9sZFwiPi0yPC90ZXh0PlxuICAgIDwvZz5cbiAgICA8ZyBjbGFzcz1cIm5vZGVcIiBpZD1cIm4yXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKCR7ZXdpZHRoLzR9LCAxNTApXCI+XG4gICAgICA8Y2lyY2xlIHI9XCIyNVwiIGZpbGw9XCIke3Bpdm90fVwiIHN0cm9rZT1cImJsYWNrXCI+PC9jaXJjbGU+XG4gICAgICA8dGV4dCBjbGFzcz1cInZhbHVlXCIgZmlsbD1cIndoaXRlXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJjZW50cmFsXCI+cGl2b3Q8L3RleHQ+XG4gICAgICA8dGV4dCBjbGFzcz1cImJhbGFuY2VcIiBmaWxsPVwiI0MwMFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgzLCAyNSlcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJoYW5naW5nXCI+LTE8L3RleHQ+XG4gICAgPC9nPlxuICAgIDxnIGNsYXNzPVwibm9kZVwiIGlkPVwibjNcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoJHszKmV3aWR0aC80fSwgMTUwKVwiPlxuICAgICAgPHBvbHlnb24gcG9pbnRzPVwiMCwgMCAyNSwgMTAwIC0yNSwgMTAwXCIgZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgICAgPHRleHQgZmlsbD1cImJsYWNrXCIgeT1cIjUwXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJjZW50cmFsXCI+aDwvdGV4dD5cbiAgICA8L2c+XG4gICAgPGcgY2xhc3M9XCJub2RlXCIgaWQ9XCJuNFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgke2V3aWR0aC84fSwgMjUwKVwiPlxuICAgICAgPHBvbHlnb24gcG9pbnRzPVwiMCwgMCAyNSwgMTAwIC0yNSwgMTAwXCIgZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgICAgPHRleHQgZmlsbD1cImJsYWNrXCIgeT1cIjUwXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJjZW50cmFsXCI+aDwvdGV4dD5cbiAgICAgIDxsaW5lIHgxPVwiMFwiIHkxPVwiMTAwXCIgeDI9XCIwXCIgeTI9XCIxNzVcIiBzdHJva2U9XCJibGFja1wiIHN0cm9rZS1kYXNoYXJyYXk9XCI0XCIgLz5cbiAgICAgIDxjaXJjbGUgY3k9XCIxNzVcIiByPVwiMTBcIiBzdHJva2UtZGFzaGFycmF5PVwiNFwiIGZpbGw9XCJ3aGl0ZVwiIHN0cm9rZT1cImJsYWNrXCI+PC9jaXJjbGU+XG4gICAgPC9nPlxuICAgIDxnIGNsYXNzPVwibm9kZVwiIGlkPVwibjVcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoJHszKmV3aWR0aC84fSwgMjUwKVwiPlxuICAgICAgPHBvbHlnb24gcG9pbnRzPVwiMCwgMCAyNSwgMTAwIC0yNSwgMTAwXCIgZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgICAgPHRleHQgZmlsbD1cImJsYWNrXCIgeT1cIjUwXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJjZW50cmFsXCI+aDwvdGV4dD5cbiAgICA8L2c+XG4gPC9zdmc+XG4gIDxmaWdjYXB0aW9uIHN0eWxlPVwibWF4LXdpZHRoOjY0MHB4O3RleHQtYWxpZ246Y2VudGVyXCI+QmFsYW5jZSBGYWN0b3JzIGJlZm9yZSAmIGFmdGVyIGEgc2luZ2xlIHJpZ2h0IHJvdGF0aW9uPC9maWdjYXB0aW9uPjwvZmlndXJlPmA7XG4gIFxuICBjb25zdCB0cmVlX3ZpZXcgPSBkMy5zZWxlY3Qodmlldyk7XG4gIHZhciB0ID0gZDMudHJhbnNpdGlvbigpO1xuICBcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNlMTJcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCAzKmV3aWR0aC80KVxuICAgICAgICAgIC5hdHRyKFwieTFcIiwgMTUwKVxuICAgICAgICAgIC5hdHRyKFwieDJcIiwgZXdpZHRoLzIpXG4gICAgICAgICAgLmF0dHIoXCJ5MlwiLCA1MClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCBld2lkdGgvMilcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDUwKVxuICAgICAgICAgIC5hdHRyKFwieDJcIiwgZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MlwiLCAxNTApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI2UxM1wiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcIngxXCIsIDMqZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAxNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCA3KmV3aWR0aC84KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMjUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcIngxXCIsIGV3aWR0aC8yKVxuICAgICAgICAgIC5hdHRyKFwieTFcIiwgNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCAzKmV3aWR0aC80KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMTUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNlMjRcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCBld2lkdGgvMilcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDUwKVxuICAgICAgICAgIC5hdHRyKFwieDJcIiwgZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MlwiLCAxNTApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAxNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCBld2lkdGgvOClcbiAgICAgICAgICAuYXR0cihcInkyXCIsIDI1MClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLm9uKFwic3RhcnRcIiwgcmVwZWF0KTtcbiAgfSk7XG4gIHRyZWVfdmlldy5zZWxlY3QoXCIjZTI1XCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgMypld2lkdGgvNClcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDE1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIDUqZXdpZHRoLzgpXG4gICAgICAgICAgLmF0dHIoXCJ5MlwiLCAyNTApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAxNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCAzKmV3aWR0aC84KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMjUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcblxuICBcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNuMVwiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArICgzKmV3aWR0aC80KSArIFwiLCAxNTApXCIpXG4gICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIChld2lkdGgvMikgKyBcIiwgNTApXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI24xPi5iYWxhbmNlXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC50ZXh0VHdlZW4oKCkgPT4gKCh0KSA9PiB0IDw9IDAuNSA/IFwiLTJcIiA6IFwiKzBcIikpXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcImJsYWNrXCIpXG4gICAgICAgICAgLnN0eWxlVHdlZW4oXCJmb250LXdlaWdodFwiLCAoKSA9PiAoKHQpID0+IHQgPD0gMC41ID8gXCJib2xkXCIgOlwibm9ybWFsXCIpKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgLnRleHQoLTIpXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcIiNjMDBcIilcbiAgICAgICAgICAuc3R5bGUoXCJmb250LXdlaWdodFwiLCBcImJvbGRcIilcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLm9uKFwic3RhcnRcIiwgcmVwZWF0KTtcbiAgfSk7XG4gIFxuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI24yXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKGV3aWR0aC8yKSArIFwiLCA1MClcIilcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKGV3aWR0aC80KSArIFwiLCAxNTApXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI24yPi5iYWxhbmNlXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC50ZXh0VHdlZW4oKCkgPT4gKCh0KSA9PiB0IDw9IDAuNSA/IFwiLTFcIiA6IFwiKzBcIikpXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcImJsYWNrXCIpXG4gICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAudGV4dChcIi0xXCIpXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcIiNjMDBcIilcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLm9uKFwic3RhcnRcIiwgcmVwZWF0KTtcbiAgfSk7XG5cbiAgdHJlZV92aWV3LnNlbGVjdChcIiNuM1wiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArICg3KmV3aWR0aC84KSArIFwiLCAyNTApXCIpXG4gICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArICgzKmV3aWR0aC80KSArIFwiLCAxNTApXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuXG4gIHRyZWVfdmlldy5zZWxlY3QoXCIjbjRcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoZXdpZHRoLzQpICsgXCIsIDE1MClcIilcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKGV3aWR0aC84KSArIFwiLCAyNTApXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuXG4gIHRyZWVfdmlldy5zZWxlY3QoXCIjbjVcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoNSpld2lkdGgvOCkgKyBcIiwgMjUwKVwiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoMypld2lkdGgvOCkgKyBcIiwgMjUwKVwiKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgXG4gIHJldHVybiB2aWV3O1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xuICBjb25zdCB2aWV3ID0gaHRtbGA8ZmlndXJlPjxzdmcgd2lkdGg9JHtld2lkdGh9IGhlaWdodD1cIjQ1MlwiPlxuICAgIDxsaW5lIGNsYXNzPVwiZWRnZVwiIGlkPVwiZTEyXCIgeDE9XCIke2V3aWR0aC8yfVwiIHkxPVwiNTBcIiB4Mj1cIiR7Mypld2lkdGgvNH1cIiB5Mj1cIjE1MFwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImUxM1wiIHgxPVwiJHtld2lkdGgvMn1cIiB5MT1cIjUwXCIgeDI9XCIke2V3aWR0aC80fVwiIHkyPVwiMTUwXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgIDxsaW5lIGNsYXNzPVwiZWRnZVwiIGlkPVwiZTI0XCIgeDE9XCIkezMqZXdpZHRoLzR9XCIgeTE9XCIxNTBcIiB4Mj1cIiR7Nypld2lkdGgvOH1cIiB5Mj1cIjI1MFwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImUyNVwiIHgxPVwiJHszKmV3aWR0aC80fVwiIHkxPVwiMTUwXCIgeDI9XCIkezUqZXdpZHRoLzh9XCIgeTI9XCIyNTBcIiBzdHJva2U9XCJibGFja1wiIC8+XG5cbiAgICA8ZyBjbGFzcz1cIm5vZGVcIiBpZD1cIm4xXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKCR7ZXdpZHRoLzJ9LCA1MClcIj5cbiAgICAgIDxjaXJjbGUgcj1cIjI1XCIgZmlsbD1cIiR7cm9vdH1cIiBzdHJva2U9XCJibGFja1wiPjwvY2lyY2xlPlxuICAgICAgPHRleHQgY2xhc3M9XCJ2YWx1ZVwiIGZpbGw9XCJ3aGl0ZVwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPnJvb3Q8L3RleHQ+XG4gICAgICA8dGV4dCBjbGFzcz1cImJhbGFuY2VcIiBmaWxsPVwiIzA5MFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgzLCAyNSlcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJoYW5naW5nXCIgc3R5bGU9XCJmb250LXdlaWdodDpib2xkXCI+KzI8L3RleHQ+XG4gICAgPC9nPlxuICAgIDxnIGNsYXNzPVwibm9kZVwiIGlkPVwibjJcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoJHszKmV3aWR0aC80fSwgMTUwKVwiPlxuICAgICAgPGNpcmNsZSByPVwiMjVcIiBmaWxsPVwiJHtwaXZvdH1cIiBzdHJva2U9XCJibGFja1wiPjwvY2lyY2xlPlxuICAgICAgPHRleHQgY2xhc3M9XCJ2YWx1ZVwiIGZpbGw9XCJ3aGl0ZVwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPnBpdm90PC90ZXh0PlxuICAgICAgPHRleHQgY2xhc3M9XCJiYWxhbmNlXCIgZmlsbD1cIiMwOTBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMywgMjUpXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiaGFuZ2luZ1wiPisxPC90ZXh0PlxuICAgIDwvZz5cbiAgICA8ZyBjbGFzcz1cIm5vZGVcIiBpZD1cIm4zXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKCR7ZXdpZHRoLzR9LCAxNTApXCI+XG4gICAgICA8cG9seWdvbiBwb2ludHM9XCIwLCAwIDI1LCAxMDAgLTI1LCAxMDBcIiBmaWxsPVwid2hpdGVcIiBzdHJva2U9XCJibGFja1wiIC8+XG4gICAgICA8dGV4dCBmaWxsPVwiYmxhY2tcIiB5PVwiNTBcIiB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiIGFsaWdubWVudC1iYXNlbGluZT1cImNlbnRyYWxcIj5oPC90ZXh0PlxuICAgIDwvZz5cbiAgICA8ZyBjbGFzcz1cIm5vZGVcIiBpZD1cIm40XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKCR7Nypld2lkdGgvOH0sIDI1MClcIj5cbiAgICAgIDxwb2x5Z29uIHBvaW50cz1cIjAsIDAgMjUsIDEwMCAtMjUsIDEwMFwiIGZpbGw9XCJ3aGl0ZVwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICAgIDx0ZXh0IGZpbGw9XCJibGFja1wiIHk9XCI1MFwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPmg8L3RleHQ+XG4gICAgICA8bGluZSB4MT1cIjBcIiB5MT1cIjEwMFwiIHgyPVwiMFwiIHkyPVwiMTc1XCIgc3Ryb2tlPVwiYmxhY2tcIiBzdHJva2UtZGFzaGFycmF5PVwiNFwiIC8+XG4gICAgICA8Y2lyY2xlIGN5PVwiMTc1XCIgcj1cIjEwXCIgc3Ryb2tlLWRhc2hhcnJheT1cIjRcIiBmaWxsPVwid2hpdGVcIiBzdHJva2U9XCJibGFja1wiPjwvY2lyY2xlPlxuICAgIDwvZz5cbiAgICA8ZyBjbGFzcz1cIm5vZGVcIiBpZD1cIm41XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKCR7NSpld2lkdGgvOH0sIDI1MClcIj5cbiAgICAgIDxwb2x5Z29uIHBvaW50cz1cIjAsIDAgMjUsIDEwMCAtMjUsIDEwMFwiIGZpbGw9XCJ3aGl0ZVwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICAgIDx0ZXh0IGZpbGw9XCJibGFja1wiIHk9XCI1MFwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPmg8L3RleHQ+XG4gICAgPC9nPlxuIDwvc3ZnPlxuICA8ZmlnY2FwdGlvbiBzdHlsZT1cIm1heC13aWR0aDo2NDBweDt0ZXh0LWFsaWduOmNlbnRlclwiPkJhbGFuY2UgRmFjdG9ycyBiZWZvcmUgJiBhZnRlciBhIHNpbmdsZSBsZWZ0IHJvdGF0aW9uPC9maWdjYXB0aW9uPjwvZmlndXJlPmA7XG4gIFxuICBjb25zdCB0cmVlX3ZpZXcgPSBkMy5zZWxlY3Qodmlldyk7XG4gIHZhciB0ID0gZDMudHJhbnNpdGlvbigpO1xuICBcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNlMTJcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCBld2lkdGgvNClcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDE1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIGV3aWR0aC8yKVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgNTApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzIpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCA1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIDMqZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MlwiLCAxNTApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI2UxM1wiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcIngxXCIsIGV3aWR0aC80KVxuICAgICAgICAgIC5hdHRyKFwieTFcIiwgMTUwKVxuICAgICAgICAgIC5hdHRyKFwieDJcIiwgZXdpZHRoLzgpXG4gICAgICAgICAgLmF0dHIoXCJ5MlwiLCAyNTApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzIpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCA1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIGV3aWR0aC80KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMTUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNlMjRcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCBld2lkdGgvMilcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDUwKVxuICAgICAgICAgIC5hdHRyKFwieDJcIiwgMypld2lkdGgvNClcbiAgICAgICAgICAuYXR0cihcInkyXCIsIDE1MClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCAzKmV3aWR0aC80KVxuICAgICAgICAgIC5hdHRyKFwieTFcIiwgMTUwKVxuICAgICAgICAgIC5hdHRyKFwieDJcIiwgNypld2lkdGgvOClcbiAgICAgICAgICAuYXR0cihcInkyXCIsIDI1MClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLm9uKFwic3RhcnRcIiwgcmVwZWF0KTtcbiAgfSk7XG4gIHRyZWVfdmlldy5zZWxlY3QoXCIjZTI1XCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAxNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCAzKmV3aWR0aC84KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMjUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcIngxXCIsIDMqZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAxNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCA1KmV3aWR0aC84KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMjUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcblxuICBcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNuMVwiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIChld2lkdGgvNCkgKyBcIiwgMTUwKVwiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoZXdpZHRoLzIpICsgXCIsIDUwKVwiKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNuMT4uYmFsYW5jZVwiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAudGV4dFR3ZWVuKCgpID0+ICgodCkgPT4gdCA8PSAwLjUgPyBcIisyXCIgOiBcIiswXCIpKVxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCJibGFja1wiKVxuICAgICAgICAgIC5zdHlsZVR3ZWVuKFwiZm9udC13ZWlnaHRcIiwgKCkgPT4gKCh0KSA9PiB0IDw9IDAuNSA/IFwiYm9sZFwiIDpcIm5vcm1hbFwiKSlcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC50ZXh0KFwiKzJcIilcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIFwiIzA5MFwiKVxuICAgICAgICAgIC5zdHlsZShcImZvbnQtd2VpZ2h0XCIsIFwiYm9sZFwiKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgXG4gIHRyZWVfdmlldy5zZWxlY3QoXCIjbjJcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoZXdpZHRoLzIpICsgXCIsIDUwKVwiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoMypld2lkdGgvNCkgKyBcIiwgMTUwKVwiKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNuMj4uYmFsYW5jZVwiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAudGV4dFR3ZWVuKCgpID0+ICgodCkgPT4gdCA8PSAwLjUgPyBcIisxXCIgOiBcIiswXCIpKVxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCJibGFja1wiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgLnRleHQoXCIrMVwiKVxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCIjMDkwXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuXG4gIHRyZWVfdmlldy5zZWxlY3QoXCIjbjNcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoIGV3aWR0aC84KSArIFwiLCAyNTApXCIpXG4gICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIChld2lkdGgvNCkgKyBcIiwgMTUwKVwiKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcblxuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI240XCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKDMqZXdpZHRoLzQpICsgXCIsIDE1MClcIilcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKDcqZXdpZHRoLzgpICsgXCIsIDI1MClcIilcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLm9uKFwic3RhcnRcIiwgcmVwZWF0KTtcbiAgfSk7XG5cbiAgdHJlZV92aWV3LnNlbGVjdChcIiNuNVwiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArICgzKmV3aWR0aC84KSArIFwiLCAyNTApXCIpXG4gICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArICg1KmV3aWR0aC84KSArIFwiLCAyNTApXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuICBcbiAgcmV0dXJuIHZpZXc7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ7XG4gIGNvbnN0IHZpZXcgPSBodG1sYDxmaWd1cmU+PHN2ZyB3aWR0aD0ke2V3aWR0aH0gaGVpZ2h0PVwiNTUyXCI+XG5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImUxMlwiIHgxPVwiJHtld2lkdGgvMn1cIiB5MT1cIjUwXCIgeDI9XCIke2V3aWR0aC80fVwiIHkyPVwiMTUwXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgIDxsaW5lIGNsYXNzPVwiZWRnZVwiIGlkPVwiZTEzXCIgeDE9XCIke2V3aWR0aC8yfVwiIHkxPVwiNTBcIiB4Mj1cIiR7Mypld2lkdGgvNH1cIiB5Mj1cIjE1MFwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImUyNFwiIHgxPVwiJHtld2lkdGgvNH1cIiB5MT1cIjE1MFwiIHgyPVwiJHtld2lkdGgvOH1cIiB5Mj1cIjI1MFwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICA8bGluZSBjbGFzcz1cImVkZ2VcIiBpZD1cImUyNVwiIHgxPVwiJHtld2lkdGgvNH1cIiB5MT1cIjE1MFwiIHgyPVwiJHszKmV3aWR0aC84fVwiIHkyPVwiMjUwXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgIDxsaW5lIGNsYXNzPVwiZWRnZVwiIGlkPVwiZTUxMFwiIHgxPVwiJHszKmV3aWR0aC84fVwiIHkxPVwiMjUwXCIgeDI9XCIkezUqZXdpZHRoLzE2fVwiIHkyPVwiMzUwXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgIDxsaW5lIGNsYXNzPVwiZWRnZVwiIGlkPVwiZTUxMVwiIHgxPVwiJHszKmV3aWR0aC84fVwiIHkxPVwiMjUwXCIgeDI9XCIkezcqZXdpZHRoLzE2fVwiIHkyPVwiMzUwXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuXG4gICAgPGcgY2xhc3M9XCJub2RlXCIgaWQ9XCJuMVwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgke2V3aWR0aC8yfSwgNTApXCI+XG4gICAgICA8Y2lyY2xlIHI9XCIyNVwiIGZpbGw9XCIke3Jvb3R9XCIgc3Ryb2tlPVwiYmxhY2tcIj48L2NpcmNsZT5cbiAgICAgIDx0ZXh0IGNsYXNzPVwidmFsdWVcIiBmaWxsPVwid2hpdGVcIiB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiIGFsaWdubWVudC1iYXNlbGluZT1cImNlbnRyYWxcIj5yb290PC90ZXh0PlxuICAgICAgPHRleHQgY2xhc3M9XCJiYWxhbmNlXCIgZmlsbD1cIiNDMDBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMywgMjUpXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiaGFuZ2luZ1wiIHN0eWxlPVwiZm9udC13ZWlnaHQ6Ym9sZFwiPi0yPC90ZXh0PlxuICAgIDwvZz5cbiAgICA8ZyBjbGFzcz1cIm5vZGVcIiBpZD1cIm4yXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKCR7ZXdpZHRoLzR9LCAxNTApXCI+XG4gICAgICA8Y2lyY2xlIHI9XCIyNVwiIGZpbGw9XCIke3Bpdm90fVwiIHN0cm9rZT1cImJsYWNrXCI+PC9jaXJjbGU+XG4gICAgICA8dGV4dCBjbGFzcz1cInZhbHVlXCIgZmlsbD1cIndoaXRlXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJjZW50cmFsXCI+cGl2b3Q8L3RleHQ+XG4gICAgICA8dGV4dCBjbGFzcz1cImJhbGFuY2VcIiBmaWxsPVwiIzA5MFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgzLCAyNSlcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJoYW5naW5nXCI+KzE8L3RleHQ+XG4gICAgPC9nPlxuICAgIDxnIGNsYXNzPVwibm9kZVwiIGlkPVwibjNcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoJHszKmV3aWR0aC80fSwgMTUwKVwiPlxuICAgICAgPHBvbHlnb24gcG9pbnRzPVwiMCwgMCAyNSwgMjAwIC0yNSwgMjAwXCIgZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgICAgPHRleHQgZmlsbD1cImJsYWNrXCIgeT1cIjEyNVwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPmgrMTwvdGV4dD5cbiAgICA8L2c+XG4gICAgPGcgY2xhc3M9XCJub2RlXCIgaWQ9XCJuNFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgke2V3aWR0aC84fSwgMjUwKVwiPlxuICAgICAgPHBvbHlnb24gcG9pbnRzPVwiMCwgMCAyNSwgMjAwIC0yNSwgMjAwXCIgZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgICAgPHRleHQgZmlsbD1cImJsYWNrXCIgeT1cIjEyNVwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPmgrMTwvdGV4dD5cbiAgICA8L2c+XG4gICAgPGcgY2xhc3M9XCJub2RlXCIgaWQ9XCJuNVwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgkezMqZXdpZHRoLzh9LCAyNTApXCI+XG4gICAgICA8Y2lyY2xlIHI9XCIyNVwiIGZpbGw9XCIke3NlY29uZGFyeX1cIiBzdHJva2U9XCJibGFja1wiPjwvY2lyY2xlPlxuICAgICAgPHRleHQgY2xhc3M9XCJ2YWx1ZVwiIGZpbGw9XCJ3aGl0ZVwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPnNlYzwvdGV4dD5cbiAgICAgIDx0ZXh0IGNsYXNzPVwiYmFsYW5jZVwiIGZpbGw9XCIjQzAwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDE1LCAyMClcIiBhbGlnbm1lbnQtYmFzZWxpbmU9XCJoYW5naW5nXCI+LTE8L3RleHQ+XG4gICAgPC9nPlxuICAgIDxnIGNsYXNzPVwibm9kZVwiIGlkPVwibjEwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKCR7NSpld2lkdGgvMTZ9LCAzNTApXCI+XG4gICAgICA8cG9seWdvbiBwb2ludHM9XCIwLCAwIDI1LCAxMDAgLTI1LCAxMDBcIiBmaWxsPVwid2hpdGVcIiBzdHJva2U9XCJibGFja1wiIC8+XG4gICAgICA8dGV4dCBmaWxsPVwiYmxhY2tcIiB5PVwiNTBcIiB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiIGFsaWdubWVudC1iYXNlbGluZT1cImNlbnRyYWxcIj5oPC90ZXh0PlxuICAgICAgPGxpbmUgeDE9XCIwXCIgeTE9XCIxMDBcIiB4Mj1cIjBcIiB5Mj1cIjE3NVwiIHN0cm9rZT1cImJsYWNrXCIgc3Ryb2tlLWRhc2hhcnJheT1cIjRcIiAvPlxuICAgICAgPGNpcmNsZSBjeT1cIjE3NVwiIHI9XCIxMFwiIHN0cm9rZS1kYXNoYXJyYXk9XCI0XCIgZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwiYmxhY2tcIj48L2NpcmNsZT5cbiAgICA8L2c+XG4gICAgPGcgY2xhc3M9XCJub2RlXCIgaWQ9XCJuMTFcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoJHs3KmV3aWR0aC8xNn0sIDM1MClcIj5cbiAgICAgIDxwb2x5Z29uIHBvaW50cz1cIjAsIDAgMjUsIDEwMCAtMjUsIDEwMFwiIGZpbGw9XCJ3aGl0ZVwiIHN0cm9rZT1cImJsYWNrXCIgLz5cbiAgICAgIDx0ZXh0IGZpbGw9XCJibGFja1wiIHk9XCI1MFwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgYWxpZ25tZW50LWJhc2VsaW5lPVwiY2VudHJhbFwiPmg8L3RleHQ+XG4gICAgICA8bGluZSB4MT1cIjBcIiB5MT1cIjEwMFwiIHgyPVwiMFwiIHkyPVwiMTc1XCIgc3Ryb2tlPVwiYmxhY2tcIiBzdHJva2UtZGFzaGFycmF5PVwiNFwiIHZpc2liaWxpdHk9XCJoaWRkZW5cIiAvPlxuICAgICAgPGNpcmNsZSBjeT1cIjE3NVwiIHI9XCIxMFwiIHN0cm9rZS1kYXNoYXJyYXk9XCI0XCIgZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwiYmxhY2tcIiB2aXNpYmlsaXR5PVwiaGlkZGVuXCIgPjwvY2lyY2xlPlxuICAgIDwvZz5cbiA8L3N2Zz5cbiAgPGZpZ2NhcHRpb24gc3R5bGU9XCJtYXgtd2lkdGg6NjQwcHg7dGV4dC1hbGlnbjpjZW50ZXJcIj5CYWxhbmNlIEZhY3RvcnMgYmVmb3JlICYgYWZ0ZXIgYSBsZWZ0LXJpZ2h0IGRvdWJsZSByb3RhdGlvbjwvZmlnY2FwdGlvbj48L2ZpZ3VyZT5gO1xuICBcbiAgY29uc3QgdHJlZV92aWV3ID0gZDMuc2VsZWN0KHZpZXcpO1xuICB2YXIgdCA9IGQzLnRyYW5zaXRpb24oKTtcbiAgICBcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNlMTJcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgMypld2lkdGgvNClcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDE1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIGV3aWR0aC8yKVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgNTApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzIpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCA1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIGV3aWR0aC80KSBcbiAgICAgICAgICAuYXR0cihcInkyXCIsIDE1MClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLm9uKFwic3RhcnRcIiwgcmVwZWF0KTtcbiAgfSk7XG4gIHRyZWVfdmlldy5zZWxlY3QoXCIjZTEzXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcIngxXCIsIDMqZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAxNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCA3KmV3aWR0aC84KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMjUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcIngxXCIsIGV3aWR0aC8yKVxuICAgICAgICAgIC5hdHRyKFwieTFcIiwgNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCAzKmV3aWR0aC80KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMTUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNlMjRcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCBld2lkdGgvOClcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDI1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIGV3aWR0aC8xNilcbiAgICAgICAgICAuYXR0cihcInkyXCIsIDM1MClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCBld2lkdGgvNClcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDE1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIGV3aWR0aC84KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMjUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLm9uKFwic3RhcnRcIiwgcmVwZWF0KTtcbiAgfSk7XG4gIHRyZWVfdmlldy5zZWxlY3QoXCIjZTI1XCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzgpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAyNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCBld2lkdGgvNClcbiAgICAgICAgICAuYXR0cihcInkyXCIsIDE1MClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCBld2lkdGgvNClcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDE1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIGV3aWR0aC8yKVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgNTApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAxNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCAzKmV3aWR0aC84KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMjUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNlNTEwXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzgpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAyNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCAzKmV3aWR0aC8xNilcbiAgICAgICAgICAuYXR0cihcInkyXCIsIDM1MClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCBld2lkdGgvNClcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDE1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIDMqZXdpZHRoLzgpXG4gICAgICAgICAgLmF0dHIoXCJ5MlwiLCAyNTApXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgMypld2lkdGgvOClcbiAgICAgICAgICAuYXR0cihcInkxXCIsIDI1MClcbiAgICAgICAgICAuYXR0cihcIngyXCIsIDUqZXdpZHRoLzE2KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMzUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNlNTExXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAxNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCAzKmV3aWR0aC84KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMjUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcIngxXCIsIDMqZXdpZHRoLzQpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAxNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCA1KmV3aWR0aC84KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgMjUwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcIngxXCIsIDMqZXdpZHRoLzgpXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCAyNTApXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCA3KmV3aWR0aC8xNilcbiAgICAgICAgICAuYXR0cihcInkyXCIsIDM1MClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLm9uKFwic3RhcnRcIiwgcmVwZWF0KTtcbiAgfSk7XG5cbiAgXG4gIHRyZWVfdmlldy5zZWxlY3QoXCIjbjFcIikudHJhbnNpdGlvbih0KVxuICAgIC5kZWxheSgxMDAwKVxuICAgIC5vbihcInN0YXJ0XCIsIGZ1bmN0aW9uIHJlcGVhdCgpIHtcbiAgICAgIGQzLmFjdGl2ZSh0aGlzKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArICgzKmV3aWR0aC80KSArIFwiLCAxNTApXCIpXG4gICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIChld2lkdGgvMikgKyBcIiwgNTApXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI24xPi5iYWxhbmNlXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLnRleHRUd2VlbigoKSA9PiAoKHQpID0+IHQgPD0gMC41ID8gXCItMlwiIDogXCIrMVwiKSlcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIFwiIzA5MFwiKVxuICAgICAgICAgIC5zdHlsZVR3ZWVuKFwiZm9udC13ZWlnaHRcIiwgKCkgPT4gKCh0KSA9PiB0IDw9IDAuNSA/IFwiYm9sZFwiIDpcIm5vcm1hbFwiKSlcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC50ZXh0KC0yKVxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCIjYzAwXCIpXG4gICAgICAgICAgLnN0eWxlKFwiZm9udC13ZWlnaHRcIiwgXCJib2xkXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuICBcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNuMlwiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIChld2lkdGgvOCkgKyBcIiwgMjUwKVwiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoZXdpZHRoLzQpICsgXCIsIDE1MClcIilcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcbiAgdHJlZV92aWV3LnNlbGVjdChcIiNuMj4uYmFsYW5jZVwiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAudGV4dFR3ZWVuKCgpID0+ICgodCkgPT4gdCA8PSAwLjUgPyBcIisxXCIgOiBcIiswXCIpKVxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCJibGFja1wiKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDE1LDIwKVwiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMywyNSlcIilcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC50ZXh0KFwiKzFcIilcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIFwiIzA5MFwiKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcblxuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI24zXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoNypld2lkdGgvOCkgKyBcIiwgMjUwKVwiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoMypld2lkdGgvNCkgKyBcIiwgMTUwKVwiKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcblxuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI240XCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKGV3aWR0aC8xNikgKyBcIiwgMzUwKVwiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoZXdpZHRoLzgpICsgXCIsIDI1MClcIilcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAub24oXCJzdGFydFwiLCByZXBlYXQpO1xuICB9KTtcblxuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI241XCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKGV3aWR0aC80KSArIFwiLCAxNTApXCIpXG4gICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIChld2lkdGgvMikgKyBcIiwgNTApXCIpXG4gICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmRlbGF5KGR1cilcbiAgICAgICAgICAuZHVyYXRpb24oMClcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArICgzKmV3aWR0aC84KSArIFwiLCAyNTApXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gIH0pO1xuICB0cmVlX3ZpZXcuc2VsZWN0KFwiI241Pi5iYWxhbmNlXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDMsIDI1KVwiKVxuICAgICAgICAgIC50ZXh0VHdlZW4oKCkgPT4gKCh0KSA9PiB0IDw9IDAuNSA/IFwiLTFcIiA6IFwiLTJcIikpXG4gICAgICAgICAgLnN0eWxlVHdlZW4oXCJmb250LXdlaWdodFwiLCAoKSA9PiAoKHQpID0+IHQgPD0gMC41ID8gXCJub3JtYWxcIiA6XCJib2xkXCIpKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAudGV4dFR3ZWVuKCgpID0+ICgodCkgPT4gdCA8PSAwLjUgPyBcIi0yXCIgOiBcIiswXCIpKVxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCJibGFja1wiKVxuICAgICAgICAgIC5zdHlsZVR3ZWVuKFwiZm9udC13ZWlnaHRcIiwgKCkgPT4gKCh0KSA9PiB0IDw9IDAuNSA/IFwiYm9sZFwiIDpcIm5vcm1hbFwiKSlcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC50ZXh0KC0xKVxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCIjYzAwXCIpXG4gICAgICAgICAgLnN0eWxlKFwiZm9udC13ZWlnaHRcIiwgXCJub3JtYWxcIilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgxNSwgMjApXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gICAgfSk7XG5cbiAgICB0cmVlX3ZpZXcuc2VsZWN0KFwiI24xMFwiKS50cmFuc2l0aW9uKHQpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm9uKFwic3RhcnRcIiwgZnVuY3Rpb24gcmVwZWF0KCkge1xuICAgICAgZDMuYWN0aXZlKHRoaXMpXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArICgzKmV3aWR0aC8xNikgKyBcIiwgMzUwKVwiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kdXJhdGlvbihkdXIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoMypld2lkdGgvOCkgKyBcIiwgMjUwKVwiKVxuICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAoNSpld2lkdGgvMTYpICsgXCIsIDM1MClcIilcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5kZWxheShkdXIpXG4gICAgICAgICAgLm9uKFwic3RhcnRcIiwgcmVwZWF0KTtcbiAgICB9KTtcblxuICAgIHRyZWVfdmlldy5zZWxlY3QoXCIjbjExXCIpLnRyYW5zaXRpb24odClcbiAgICAuZGVsYXkoMTAwMClcbiAgICAub24oXCJzdGFydFwiLCBmdW5jdGlvbiByZXBlYXQoKSB7XG4gICAgICBkMy5hY3RpdmUodGhpcylcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKDMqZXdpZHRoLzgpICsgXCIsIDI1MClcIilcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZHVyYXRpb24oZHVyKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKDUqZXdpZHRoLzgpICsgXCIsIDI1MClcIilcbiAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKDcqZXdpZHRoLzE2KSArIFwiLCAzNTApXCIpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZGVsYXkoZHVyKVxuICAgICAgICAgIC5vbihcInN0YXJ0XCIsIHJlcGVhdCk7XG4gICAgIH0pO1xuXG4gIHJldHVybiB2aWV3O1xufVxuIn1dfQ==
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../theory_bits";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>